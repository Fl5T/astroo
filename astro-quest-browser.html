<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astro Quest - Cosmic Awakening</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10/dist/framer-motion.js"></script>
    
    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Cosmic theme styles with light mode support */
        :root {
            /* Dark mode variables */
            --midnight: 240 45% 15%;
            --amethyst: 270 50% 35%;
            --blush: 340 60% 80%;
            --starlight: 60 30% 98%;
            --background: 240 45% 8%;
            --foreground: 60 30% 98%;
            --primary: 270 50% 45%;
            --accent: 340 60% 60%;
            --muted: 240 25% 18%;
            --border: 240 25% 25%;
            
            /* Light mode variables */
            --light-background: 220 20% 98%;
            --light-foreground: 240 10% 10%;
            --light-primary: 270 50% 45%;
            --light-accent: 340 60% 60%;
            --light-muted: 220 15% 90%;
            --light-border: 220 15% 85%;
        }

        body {
            background: linear-gradient(135deg, hsl(240 45% 8%), hsl(270 50% 20%));
            color: hsl(60 30% 98%);
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        /* Light mode styles */
        body.light-mode {
            background: linear-gradient(135deg, hsl(220 20% 98%), hsl(270 30% 95%));
            color: hsl(240 10% 10%);
        }

        .light-mode .cosmic-card {
            background: linear-gradient(135deg, hsl(270 50% 35% / 0.05), hsl(340 60% 80% / 0.05));
            border: 1px solid hsl(220 15% 85%);
            box-shadow: 0 10px 30px hsl(240 45% 15% / 0.1);
        }

        .light-mode .magical-input {
            border: 2px solid hsl(220 15% 85%);
            background: hsl(220 15% 90% / 0.5);
            color: hsl(240 10% 10%);
        }

        .light-mode .star {
            background: hsl(240 10% 10%);
        }

        .cosmic-card {
            background: linear-gradient(135deg, hsl(270 50% 35% / 0.1), hsl(340 60% 80% / 0.1));
            border: 1px solid hsl(240 25% 25%);
            border-radius: 0.75rem;
            padding: 1.5rem;
            backdrop-filter: blur(8px);
            box-shadow: 0 10px 30px hsl(240 45% 15% / 0.5);
        }

        .glow-button {
            background: linear-gradient(135deg, hsl(270 50% 45%), hsl(340 60% 60%));
            color: hsl(60 30% 98%);
            border: 1px solid hsl(270 50% 45%);
            border-radius: 9999px;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            min-height: 44px;
        }

        .glow-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px hsl(60 30% 98% / 0.3);
        }

        .magical-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            border: 2px solid hsl(240 25% 25%);
            background: hsl(240 25% 18% / 0.5);
            color: hsl(60 30% 98%);
            transition: all 0.3s ease;
            min-height: 44px;
        }

        .magical-input:focus {
            border-color: hsl(270 50% 45%);
            box-shadow: 0 0 15px hsl(270 50% 35% / 0.4);
            outline: none;
        }

        .heading-cosmic {
            background: linear-gradient(135deg, hsl(270 50% 45%), hsl(340 60% 60%));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
        }

        /* Starfield animation */
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        /* Crystal glitter animation */
        @keyframes crystal-glitter-float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.7;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Floating animation */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Sparkle animation */
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Glow pulse animation */
        @keyframes glow-pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); }
            50% { box-shadow: 0 0 30px rgba(255, 255, 255, 0.5); }
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            body { font-size: 16px; }
            .cosmic-card { padding: 1rem; }
        }

        /* Crystal and color specific styles */
        .crystal-glow {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            animation: glow-pulse 2s ease-in-out infinite;
        }

        .color-swatch {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-swatch:hover {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }

        .sparkle {
            animation: sparkle 2s infinite;
        }

        /* Theme toggle button */
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 100;
            background: linear-gradient(135deg, hsl(270 50% 45%), hsl(340 60% 60%));
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .light-mode .theme-toggle {
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* Modal styles for signup */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }

        .modal-content {
            background: linear-gradient(135deg, hsl(270 50% 35% / 0.95), hsl(340 60% 80% / 0.95));
            border: 1px solid hsl(240 25% 25%);
            border-radius: 1.5rem;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 60px hsl(240 45% 15% / 0.8);
        }

        .light-mode .modal-content {
            background: linear-gradient(135deg, hsl(270 50% 35% / 0.1), hsl(340 60% 80% / 0.1));
            border: 1px solid hsl(220 15% 85%);
            box-shadow: 0 20px 60px hsl(240 45% 15% / 0.2);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { motion, AnimatePresence } = window.Motion;

        // Experience System
        const useExperience = () => {
            const [experienceData, setExperienceData] = useState({
                currentExp: 0,
                level: 0,
                totalExp: 0,
                completedQuests: [],
                completedFixes: [],
                reflections: []
            });

            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                const saved = localStorage.getItem(`astro_quest_experience_${userId}`);
                if (saved) {
                    try {
                        setExperienceData(JSON.parse(saved));
                    } catch (error) {
                        console.error('Failed to parse saved experience data:', error);
                    }
                }
            }, []);

            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                if (userId) {
                    localStorage.setItem(`astro_quest_experience_${userId}`, JSON.stringify(experienceData));
                }
            }, [experienceData]);

            const addExperience = (amount) => {
                setExperienceData(prev => {
                    const newExp = prev.currentExp + amount;
                    const newLevel = Math.floor(newExp / 100);
                    return {
                        ...prev,
                        currentExp: newExp,
                        level: newLevel,
                        totalExp: prev.totalExp + amount
                    };
                });
            };

            return { experienceData, addExperience };
        };

        // Starfield Background
        const StarfieldBackground = () => {
            useEffect(() => {
                const createStars = () => {
                    const stars = [];
                    const starCount = window.innerWidth < 768 ? 50 : 100;
                    
                    for (let i = 0; i < starCount; i++) {
                        const star = document.createElement('div');
                        star.className = 'star';
                        star.style.left = Math.random() * 100 + '%';
                        star.style.top = Math.random() * 100 + '%';
                        star.style.width = Math.random() * 3 + 1 + 'px';
                        star.style.height = star.style.width;
                        star.style.animationDelay = Math.random() * 2 + 's';
                        document.body.appendChild(star);
                        stars.push(star);
                    }
                    
                    return stars;
                };

                const stars = createStars();
                return () => stars.forEach(star => star.remove());
            }, []);

            return null;
        };

        // Signup/Auth Screen
        const AuthScreen = ({ onLogin, onSignup }) => {
            const [isLightMode, setIsLightMode] = useState(false);
            const [isLogin, setIsLogin] = useState(true);
            const [formData, setFormData] = useState({
                email: '',
                password: '',
                name: ''
            });

            useEffect(() => {
                const savedMode = localStorage.getItem('astro_quest_theme');
                if (savedMode === 'light') {
                    setIsLightMode(true);
                    document.body.classList.add('light-mode');
                }
            }, []);

            const toggleTheme = () => {
                setIsLightMode(!isLightMode);
                if (isLightMode) {
                    document.body.classList.remove('light-mode');
                    localStorage.setItem('astro_quest_theme', 'dark');
                } else {
                    document.body.classList.add('light-mode');
                    localStorage.setItem('astro_quest_theme', 'light');
                }
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (isLogin) {
                    onLogin(formData);
                } else {
                    onSignup(formData);
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    {/* Theme Toggle Button */}
                    <button
                        onClick={toggleTheme}
                        className="theme-toggle"
                        title={isLightMode ? "Switch to Dark Mode" : "Switch to Light Mode"}
                    >
                        {isLightMode ? '🌙' : '☀️'}
                    </button>
                    
                    <motion.div
                        initial={{ scale: 0.8, opacity: 0 }}
                        animate={{ scale: 1, opacity: 1 }}
                        transition={{ duration: 0.8 }}
                        className="cosmic-card max-w-md w-full"
                    >
                        <div className="text-center mb-8">
                            <div className="text-6xl mb-4">✨</div>
                            <h1 className="heading-cosmic text-4xl font-bold mb-4">
                                Astro Quest
                            </h1>
                            <p className="text-gray-300 text-lg">
                                {isLogin ? 'Welcome back to your cosmic journey' : 'Begin your spiritual awakening'}
                            </p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-6">
                            {!isLogin && (
                                <div>
                                    <label className="block text-sm font-medium mb-2">Full Name</label>
                                    <input
                                        type="text"
                                        value={formData.name}
                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                        className="magical-input"
                                        placeholder="Enter your full name"
                                        required={!isLogin}
                                    />
                                </div>
                            )}

                            <div>
                                <label className="block text-sm font-medium mb-2">Email</label>
                                <input
                                    type="email"
                                    value={formData.email}
                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                    className="magical-input"
                                    placeholder="Enter your email"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium mb-2">Password</label>
                                <input
                                    type="password"
                                    value={formData.password}
                                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                                    className="magical-input"
                                    placeholder="Enter your password"
                                    required
                                />
                            </div>

                            <button
                                type="submit"
                                className="glow-button w-full"
                            >
                                {isLogin ? '✨ Sign In' : '✨ Create Account'}
                            </button>
                        </form>

                        <div className="mt-6 text-center">
                            <button
                                onClick={() => setIsLogin(!isLogin)}
                                className="text-purple-300 hover:text-purple-200 transition-colors"
                            >
                                {isLogin ? "Don't have an account? Sign up" : "Already have an account? Sign in"}
                            </button>
                        </div>
                    </motion.div>
                </div>
            );
        };

        // Welcome Screen
        const WelcomeScreen = ({ onComplete }) => {
            const [isLightMode, setIsLightMode] = useState(false);
            const [formData, setFormData] = useState({
                name: '',
                birthDate: '',
                birthTime: ''
            });

            useEffect(() => {
                const savedMode = localStorage.getItem('astro_quest_theme');
                if (savedMode === 'light') {
                    setIsLightMode(true);
                    document.body.classList.add('light-mode');
                }
            }, []);

            const toggleTheme = () => {
                setIsLightMode(!isLightMode);
                if (isLightMode) {
                    document.body.classList.remove('light-mode');
                    localStorage.setItem('astro_quest_theme', 'dark');
                } else {
                    document.body.classList.add('light-mode');
                    localStorage.setItem('astro_quest_theme', 'light');
                }
            };

            const calculateAstroData = (name, birthDate) => {
                const date = new Date(birthDate);
                const month = date.getMonth() + 1;
                const day = date.getDate();
                
                const zodiacSigns = [
                    { sign: 'Capricorn', start: { month: 12, day: 22 }, end: { month: 1, day: 19 } },
                    { sign: 'Aquarius', start: { month: 1, day: 20 }, end: { month: 2, day: 18 } },
                    { sign: 'Pisces', start: { month: 2, day: 19 }, end: { month: 3, day: 20 } },
                    { sign: 'Aries', start: { month: 3, day: 21 }, end: { month: 4, day: 19 } },
                    { sign: 'Taurus', start: { month: 4, day: 20 }, end: { month: 5, day: 20 } },
                    { sign: 'Gemini', start: { month: 5, day: 21 }, end: { month: 6, day: 20 } },
                    { sign: 'Cancer', start: { month: 6, day: 21 }, end: { month: 7, day: 22 } },
                    { sign: 'Leo', start: { month: 7, day: 23 }, end: { month: 8, day: 22 } },
                    { sign: 'Virgo', start: { month: 8, day: 23 }, end: { month: 9, day: 22 } },
                    { sign: 'Libra', start: { month: 9, day: 23 }, end: { month: 10, day: 22 } },
                    { sign: 'Scorpio', start: { month: 10, day: 23 }, end: { month: 11, day: 21 } },
                    { sign: 'Sagittarius', start: { month: 11, day: 22 }, end: { month: 12, day: 21 } },
                ];

                let sunSign = 'Aries';
                for (const zodiac of zodiacSigns) {
                    if (
                        (month === zodiac.start.month && day >= zodiac.start.day) ||
                        (month === zodiac.end.month && day <= zodiac.end.day)
                    ) {
                        sunSign = zodiac.sign;
                        break;
                    }
                }

                const moonSigns = ['Pisces', 'Scorpio', 'Cancer', 'Libra', 'Virgo', 'Gemini'];
                const moonSign = moonSigns[Math.floor(Math.random() * moonSigns.length)];

                const nameValue = name.toLowerCase().split('').reduce((sum, char) => {
                    const charCode = char.charCodeAt(0);
                    if (charCode >= 97 && charCode <= 122) {
                        return sum + (charCode - 96);
                    }
                    return sum;
                }, 0);

                const reduceToSingleDigit = (num) => {
                    while (num > 9) {
                        num = num.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
                    }
                    return num;
                };

                const lifePathNumber = reduceToSingleDigit(
                    date.getDate() + date.getMonth() + 1 + date.getFullYear()
                );
                
                const destinyNumber = reduceToSingleDigit(nameValue);
                const personalityNumber = reduceToSingleDigit(nameValue + date.getDate());

                return { sunSign, moonSign, lifePathNumber, destinyNumber, personalityNumber };
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.name && formData.birthDate) {
                    const astroData = calculateAstroData(formData.name, formData.birthDate);
                    onComplete({
                        name: formData.name,
                        birthDate: formData.birthDate,
                        birthTime: formData.birthTime,
                        ...astroData
                    });
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    {/* Theme Toggle Button */}
                    <button
                        onClick={toggleTheme}
                        className="theme-toggle"
                        title={isLightMode ? "Switch to Dark Mode" : "Switch to Light Mode"}
                    >
                        {isLightMode ? '🌙' : '☀️'}
                    </button>
                    
                    <motion.div
                        initial={{ scale: 0.8, opacity: 0 }}
                        animate={{ scale: 1, opacity: 1 }}
                        transition={{ duration: 0.8 }}
                        className="cosmic-card max-w-md w-full"
                    >
                        <div className="text-center mb-8">
                            <h1 className="heading-cosmic text-4xl font-bold mb-4">
                                Astro Quest
                            </h1>
                            <p className="text-gray-300 text-lg">
                                Discover your cosmic destiny through the stars
                            </p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium mb-2">Full Name</label>
                                <input
                                    type="text"
                                    value={formData.name}
                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                    className="magical-input"
                                    placeholder="Enter your full name"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium mb-2">Birth Date</label>
                                <input
                                    type="date"
                                    value={formData.birthDate}
                                    onChange={(e) => setFormData({ ...formData, birthDate: e.target.value })}
                                    className="magical-input"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium mb-2">Birth Time (Optional)</label>
                                <input
                                    type="time"
                                    value={formData.birthTime}
                                    onChange={(e) => setFormData({ ...formData, birthTime: e.target.value })}
                                    className="magical-input"
                                />
                            </div>

                            <button
                                type="submit"
                                className="glow-button w-full"
                            >
                                ✨ Reveal My Cosmic Profile
                            </button>
                        </form>
                    </motion.div>
                </div>
            );
        };

        // Dashboard Screen
        const DashboardScreen = ({ profile, onNavigate, experienceData }) => {
            const [isLightMode, setIsLightMode] = useState(false);

            useEffect(() => {
                const savedMode = localStorage.getItem('astro_quest_theme');
                if (savedMode === 'light') {
                    setIsLightMode(true);
                    document.body.classList.add('light-mode');
                }
            }, []);

            const toggleTheme = () => {
                setIsLightMode(!isLightMode);
                if (isLightMode) {
                    document.body.classList.remove('light-mode');
                    localStorage.setItem('astro_quest_theme', 'dark');
                } else {
                    document.body.classList.add('light-mode');
                    localStorage.setItem('astro_quest_theme', 'light');
                }
            };

            const getSignDescription = (sign, type) => {
                const descriptions = {
                    sun: {
                        Aries: 'The Bold Flame - Pioneer spirit and natural leadership',
                        Taurus: 'The Steady Earth - Reliable strength and sensual nature',
                        Gemini: 'The Twin Winds - Curious mind and adaptable spirit',
                        Cancer: 'The Nurturing Moon - Emotional depth and protective instincts',
                        Leo: 'The Radiant Lion - Creative fire and generous heart',
                        Virgo: 'The Perfect Analyst - Detail-oriented and service-minded',
                        Libra: 'The Harmonious Balance - Diplomatic and beauty-seeking',
                        Scorpio: 'The Mysterious Depths - Intense passion and transformation',
                        Sagittarius: 'The Free Archer - Adventurous spirit and philosophical mind',
                        Capricorn: 'The Mountain Climber - Ambitious drive and practical wisdom',
                        Aquarius: 'The Water Bearer - Innovative thinking and humanitarian heart',
                        Pisces: 'The Dreamer - Intuitive soul and compassionate spirit'
                    }
                };
                return descriptions[type][sign] || 'Mysterious cosmic energy';
            };

            const expToNext = 100 - (experienceData.currentExp % 100);
            const progress = ((experienceData.currentExp % 100) / 100) * 100;

            return (
                <div className="min-h-screen p-4">
                    {/* Theme Toggle Button */}
                    <button
                        onClick={toggleTheme}
                        className="theme-toggle"
                        title={isLightMode ? "Switch to Dark Mode" : "Switch to Light Mode"}
                    >
                        {isLightMode ? '🌙' : '☀️'}
                    </button>
                    
                    <motion.div
                        initial={{ y: -20, opacity: 0 }}
                        animate={{ y: 0, opacity: 1 }}
                        className="text-center mb-8"
                    >
                        <h1 className="heading-cosmic text-3xl font-bold mb-2">
                            Welcome, {profile.name}
                        </h1>
                        <p className="text-gray-300">Your cosmic profile awaits</p>
                    </motion.div>

                    {/* Experience Display */}
                    <motion.div
                        initial={{ scale: 0.9, opacity: 0 }}
                        animate={{ scale: 1, opacity: 1 }}
                        transition={{ delay: 0.1 }}
                        className="cosmic-card mb-6"
                    >
                        <div className="flex items-center justify-between mb-3">
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-8 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center">
                                    ⭐
                                </div>
                                <div>
                                    <div className="text-sm font-medium">Level {experienceData.level}</div>
                                    <div className="text-xs text-gray-400">
                                        {experienceData.currentExp} / {experienceData.currentExp + expToNext} XP
                                    </div>
                                </div>
                            </div>
                            <div className="text-xs text-gray-400">
                                {experienceData.totalExp} Total
                            </div>
                        </div>

                        <div className="relative h-2 bg-gray-700 rounded-full overflow-hidden">
                            <motion.div
                                className="absolute inset-y-0 left-0 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full"
                                initial={{ width: 0 }}
                                animate={{ width: `${progress}%` }}
                                transition={{ duration: 0.8 }}
                            />
                        </div>

                        <div className="text-xs text-gray-400 mt-2 text-center">
                            {expToNext} XP to next level
                        </div>
                    </motion.div>

                    {/* Profile Cards */}
                    <div className="space-y-6 mb-8">
                        <motion.div
                            initial={{ x: -50, opacity: 0 }}
                            animate={{ x: 0, opacity: 1 }}
                            transition={{ delay: 0.2 }}
                            className="cosmic-card cursor-pointer hover:scale-105 transition-transform"
                            onClick={() => onNavigate('star-sign-detail', { sign: profile.sunSign })}
                        >
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center">
                                    ☀️
                                </div>
                                <div className="flex-1">
                                    <h3 className="text-xl font-semibold text-purple-300">{profile.sunSign}</h3>
                                    <p className="text-sm text-gray-400">
                                        {getSignDescription(profile.sunSign, 'sun')}
                                    </p>
                                    <p className="text-xs text-purple-300 mt-1">Tap to explore</p>
                                </div>
                            </div>
                        </motion.div>

                        <motion.div
                            initial={{ x: 50, opacity: 0 }}
                            animate={{ x: 0, opacity: 1 }}
                            transition={{ delay: 0.4 }}
                            className="cosmic-card cursor-pointer hover:scale-105 transition-transform"
                            onClick={() => onNavigate('moon-sign-detail', { sign: profile.moonSign })}
                        >
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center">
                                    🌙
                                </div>
                                <div className="flex-1">
                                    <h3 className="text-xl font-semibold text-purple-300">{profile.moonSign}</h3>
                                    <p className="text-sm text-gray-400">
                                        Your emotional and intuitive nature
                                    </p>
                                    <p className="text-xs text-purple-300 mt-1">Tap to explore</p>
                                </div>
                            </div>
                        </motion.div>

                        <motion.div
                            initial={{ y: 50, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            transition={{ delay: 0.6 }}
                            className="cosmic-card cursor-pointer hover:scale-105 transition-transform"
                            onClick={() => onNavigate('life-path-detail', { number: profile.lifePathNumber })}
                        >
                            <div className="flex items-center gap-4">
                                <div className="w-12 h-12 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center">
                                    🔢
                                </div>
                                <div className="flex-1">
                                    <h3 className="text-xl font-semibold text-purple-300">Life Path {profile.lifePathNumber}</h3>
                                    <p className="text-sm text-gray-400">
                                        Your spiritual journey and life purpose
                                    </p>
                                    <p className="text-xs text-purple-300 mt-1">Tap to explore</p>
                                </div>
                            </div>
                        </motion.div>
                    </div>

                    {/* Navigation Buttons */}
                    <div className="grid grid-cols-2 gap-4">
                        <button
                            onClick={() => onNavigate('numerology')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            🔮
                            <span className="text-sm">Numerology</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('reflection')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            📖
                            <span className="text-sm">Reflection Diary</span>
                        </button>
                        
                        <button
                            onClick={() => {
                                const userId = localStorage.getItem('astro_quest_user_id');
                                const journeyData = {
                                    profile: userProfile,
                                    experience: experienceData,
                                    rituals: JSON.parse(localStorage.getItem(`astro_quest_rituals_${userId}`) || '[]'),
                                    reflections: JSON.parse(localStorage.getItem(`astro_quest_reflections_${userId}`) || '[]'),
                                    timestamp: new Date().toISOString()
                                };
                                
                                const shareText = `🌟 My Astro Quest Journey 🌟
Level: ${experienceData.level}
Total EXP: ${experienceData.totalExp}
Sun Sign: ${userProfile?.sunSign || 'Unknown'}
Moon Sign: ${userProfile?.moonSign || 'Unknown'}
Life Path Number: ${userProfile?.lifePathNumber || 'Unknown'}
Rituals Collected: ${journeyData.rituals.length}
Reflections Written: ${journeyData.reflections.length}

✨ Join me on this cosmic journey of self-discovery! ✨`;

                                if (navigator.share) {
                                    navigator.share({
                                        title: 'My Astro Quest Journey',
                                        text: shareText,
                                        url: window.location.href
                                    }).then(() => {
                                        addExperience(20);
                                        alert('Journey shared successfully! +20 EXP');
                                    }).catch(() => {
                                        // Fallback to clipboard
                                        navigator.clipboard.writeText(shareText).then(() => {
                                            addExperience(20);
                                            alert('Journey copied to clipboard! +20 EXP');
                                        });
                                    });
                                } else {
                                    // Fallback to clipboard
                                    navigator.clipboard.writeText(shareText).then(() => {
                                        addExperience(20);
                                        alert('Journey copied to clipboard! +20 EXP');
                                    });
                                }
                            }}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            📤
                            <span className="text-sm">Share Journey</span>
                        </button>
                        
                        <button
                            onClick={() => {
                                const input = document.createElement('input');
                                input.type = 'file';
                                input.accept = 'image/*';
                                input.onchange = (e) => {
                                    const file = e.target.files[0];
                                    if (file) {
                                        const reader = new FileReader();
                                        reader.onload = (e) => {
                                            const imageData = e.target.result;
                                            // Store the image data in localStorage
                                            const userId = localStorage.getItem('astro_quest_user_id');
                                            const uploadedPhotos = JSON.parse(localStorage.getItem(`astro_quest_photos_${userId}`) || '[]');
                                            uploadedPhotos.push({
                                                id: Date.now(),
                                                data: imageData,
                                                timestamp: new Date().toISOString(),
                                                name: file.name
                                            });
                                            localStorage.setItem(`astro_quest_photos_${userId}`, JSON.stringify(uploadedPhotos));
                                            addExperience(15);
                                            alert('Photo uploaded successfully! +15 EXP');
                                        };
                                        reader.readAsDataURL(file);
                                    }
                                };
                                input.click();
                            }}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            📷
                            <span className="text-sm">Upload Photo</span>
                        </button>
                        <button
                            onClick={() => onNavigate('crystal-companion')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            💎
                            <span className="text-sm">Crystal Companion</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('stone-library')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            🗿
                            <span className="text-sm">Stone Library</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('color-study')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            🍭
                            <span className="text-sm">Color Study</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('color-fusion')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            🤹
                            <span className="text-sm">Color Fusion</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('trait-fusion')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            ⚡
                            <span className="text-sm">Trait Fusion</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('missions')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            🚀
                            <span className="text-sm">Missions</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('crystal-shop')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            ✧
                            <span className="text-sm">Crystal Shop</span>
                        </button>
                        
                        <button
                            onClick={() => onNavigate('vaastu')}
                            className="cosmic-card p-4 h-auto flex flex-col items-center space-y-2 hover:scale-105 transition-transform"
                        >
                            🧭
                            <span className="text-sm">Vaastu Guide</span>
                        </button>
                    </div>
                </div>
            );
        };

        // Reflection Diary Screen
        const ReflectionScreen = ({ onNavigate, experienceData, addExperience }) => {
            const [reflections, setReflections] = useState([]);
            const [showForm, setShowForm] = useState(false);
            const [content, setContent] = useState('');
            const [mood, setMood] = useState('neutral');
            const [selectedImage, setSelectedImage] = useState(null);

            // Load reflections from localStorage
            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                const savedReflections = localStorage.getItem(`astro_quest_reflections_${userId}`);
                if (savedReflections) {
                    try {
                        setReflections(JSON.parse(savedReflections));
                    } catch (error) {
                        console.error('Failed to parse saved reflections:', error);
                    }
                }
            }, []);

            // Save reflections to localStorage
            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                if (userId) {
                    localStorage.setItem(`astro_quest_reflections_${userId}`, JSON.stringify(reflections));
                }
            }, [reflections]);

            const handleImageUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        setSelectedImage(e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (content.trim()) {
                    const newReflection = {
                        id: Date.now(),
                        content: content.trim(),
                        mood,
                        image: selectedImage,
                        timestamp: Date.now()
                    };
                    setReflections([newReflection, ...reflections]);
                    addExperience(10);
                    setContent('');
                    setSelectedImage(null);
                    setShowForm(false);
                }
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-8">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={() => onNavigate('dashboard')}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Reflection Diary</h1>
                        </div>
                        
                        <button
                            onClick={() => setShowForm(true)}
                            className="glow-button"
                        >
                            + New Entry
                        </button>
                    </div>

                    {showForm && (
                        <motion.div
                            initial={{ opacity: 0, y: -20 }}
                            animate={{ opacity: 1, y: 0 }}
                            className="cosmic-card mb-8"
                        >
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium mb-2">How are you feeling today?</label>
                                    <textarea
                                        value={content}
                                        onChange={(e) => setContent(e.target.value)}
                                        placeholder="Write your thoughts, feelings, or reflections here..."
                                        className="magical-input min-h-[120px] resize-none"
                                        required
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-2">Mood</label>
                                    <div className="flex gap-4">
                                        {['positive', 'neutral', 'challenging'].map((moodOption) => (
                                            <button
                                                key={moodOption}
                                                type="button"
                                                onClick={() => setMood(moodOption)}
                                                className={`px-4 py-2 rounded-full border-2 transition-colors ${
                                                    mood === moodOption
                                                        ? 'border-purple-500 bg-purple-500/20 text-purple-300'
                                                        : 'border-gray-600 text-gray-400 hover:border-purple-500/50'
                                                }`}
                                            >
                                                {moodOption === 'positive' ? '😊' : moodOption === 'neutral' ? '😐' : '😔'}
                                                {moodOption.charAt(0).toUpperCase() + moodOption.slice(1)}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-2">Add Image (Optional)</label>
                                    <div className="flex items-center gap-4">
                                        <input
                                            type="file"
                                            accept="image/*"
                                            onChange={handleImageUpload}
                                            className="hidden"
                                            id="image-upload"
                                        />
                                        <label
                                            htmlFor="image-upload"
                                            className="px-4 py-2 rounded-lg border-2 border-dashed border-gray-600 text-gray-400 hover:border-purple-500/50 cursor-pointer transition-colors"
                                        >
                                            📷 Choose Image
                                        </label>
                                        {selectedImage && (
                                            <div className="flex items-center gap-2">
                                                <img
                                                    src={selectedImage}
                                                    alt="Selected"
                                                    className="w-12 h-12 rounded-lg object-cover"
                                                />
                                                <button
                                                    type="button"
                                                    onClick={() => setSelectedImage(null)}
                                                    className="text-red-400 hover:text-red-300"
                                                >
                                                    ✕
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                </div>

                                <div className="flex gap-3">
                                    <button type="submit" className="glow-button flex-1">
                                        Save Reflection
                                    </button>
                                    <button
                                        type="button"
                                        onClick={() => setShowForm(false)}
                                        className="px-6 py-3 rounded-full border border-gray-600 text-gray-400 hover:bg-gray-600/20 transition-colors"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </motion.div>
                    )}

                    <div className="space-y-4">
                        {reflections.length === 0 ? (
                            <div className="cosmic-card text-center py-12">
                                <div className="text-4xl mb-4">📝</div>
                                <h3 className="text-lg font-semibold mb-2">No reflections yet</h3>
                                <p className="text-gray-400 mb-4">
                                    Start your journey of self-discovery by writing your first reflection
                                </p>
                                <button
                                    onClick={() => setShowForm(true)}
                                    className="glow-button"
                                >
                                    Write Your First Reflection
                                </button>
                            </div>
                        ) : (
                            reflections.map((reflection) => (
                                <motion.div
                                    key={reflection.id}
                                    initial={{ opacity: 0, y: 20 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    className="cosmic-card"
                                >
                                    <div className="flex items-start gap-3 mb-3">
                                        <div className="text-2xl">
                                            {reflection.mood === 'positive' ? '😊' : reflection.mood === 'neutral' ? '😐' : '😔'}
                                        </div>
                                        <div>
                                            <div className="text-sm font-medium">
                                                {reflection.mood.charAt(0).toUpperCase() + reflection.mood.slice(1)} Reflection
                                            </div>
                                            <div className="text-xs text-gray-400">
                                                {new Date(reflection.timestamp).toLocaleDateString()}
                                            </div>
                                        </div>
                                    </div>
                                    <p className="text-gray-200 leading-relaxed mb-3">
                                        {reflection.content}
                                    </p>
                                    {reflection.image && (
                                        <div className="mt-3">
                                            <img
                                                src={reflection.image}
                                                alt="Reflection"
                                                className="w-full max-w-md rounded-lg object-cover"
                                            />
                                        </div>
                                    )}
                                </motion.div>
                            ))
                        )}
                    </div>
                </div>
            );
        };

        // Numerology Screen
        const NumerologyScreen = ({ profile, onNavigate, experienceData, addExperience }) => {
            const [completedQuests, setCompletedQuests] = useState([]);
            const [selectedNumber, setSelectedNumber] = useState(null);

            // Load completed quests from localStorage
            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                const savedQuests = localStorage.getItem(`astro_quest_numerology_quests_${userId}`);
                if (savedQuests) {
                    try {
                        setCompletedQuests(JSON.parse(savedQuests));
                    } catch (error) {
                        console.error('Failed to parse saved numerology quests:', error);
                    }
                }
            }, []);

            // Save completed quests to localStorage
            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                if (userId) {
                    localStorage.setItem(`astro_quest_numerology_quests_${userId}`, JSON.stringify(completedQuests));
                }
            }, [completedQuests]);

            const numberInterpretations = {
                1: {
                    title: 'The Pioneer',
                    emoji: '🔥',
                    description: 'Natural leaders with strong individuality and determination',
                    strengths: ['Leadership', 'Independence', 'Innovation', 'Courage'],
                    challenges: ['Impatience', 'Dominance', 'Self-centeredness'],
                    lifePurpose: 'To lead, inspire, and create new paths for others',
                    career: 'Entrepreneurs, CEOs, Inventors, Athletes',
                    spiritual: 'Learning to balance independence with cooperation'
                },
                2: {
                    title: 'The Mediator',
                    emoji: '🌊',
                    description: 'Diplomatic peacemakers with strong intuition and sensitivity',
                    strengths: ['Diplomacy', 'Intuition', 'Cooperation', 'Patience'],
                    challenges: ['Oversensitivity', 'Indecisiveness', 'Self-doubt'],
                    lifePurpose: 'To bring harmony, balance, and cooperation to the world',
                    career: 'Counselors, Mediators, Teachers, Healers',
                    spiritual: 'Developing confidence and trusting inner wisdom'
                },
                3: {
                    title: 'The Communicator',
                    emoji: '💬',
                    description: 'Creative expressives with natural charisma and joy',
                    strengths: ['Creativity', 'Communication', 'Optimism', 'Charisma'],
                    challenges: ['Scattered energy', 'Superficiality', 'Restlessness'],
                    lifePurpose: 'To inspire, entertain, and bring joy through creative expression',
                    career: 'Artists, Writers, Performers, Teachers',
                    spiritual: 'Focusing creative energy for deeper spiritual growth'
                },
                4: {
                    title: 'The Builder',
                    emoji: '🏗️',
                    description: 'Practical organizers with strong work ethic and reliability',
                    strengths: ['Reliability', 'Organization', 'Patience', 'Practicality'],
                    challenges: ['Rigidity', 'Stubbornness', 'Resistance to change'],
                    lifePurpose: 'To build solid foundations and create lasting structures',
                    career: 'Engineers, Architects, Accountants, Managers',
                    spiritual: 'Learning flexibility while maintaining stability'
                },
                5: {
                    title: 'The Adventurer',
                    emoji: '🌍',
                    description: 'Freedom-loving explorers with adaptability and curiosity',
                    strengths: ['Adaptability', 'Curiosity', 'Freedom', 'Versatility'],
                    challenges: ['Restlessness', 'Irresponsibility', 'Overindulgence'],
                    lifePurpose: 'To experience life fully and inspire others to embrace change',
                    career: 'Travelers, Journalists, Salespeople, Researchers',
                    spiritual: 'Finding inner freedom and spiritual discipline'
                },
                6: {
                    title: 'The Nurturer',
                    emoji: '💝',
                    description: 'Caring protectors with strong sense of responsibility and love',
                    strengths: ['Nurturing', 'Responsibility', 'Harmony', 'Compassion'],
                    challenges: ['Martyrdom', 'Interference', 'Perfectionism'],
                    lifePurpose: 'To care for others and create beautiful, harmonious environments',
                    career: 'Caregivers, Artists, Counselors, Parents',
                    spiritual: 'Learning to care for self while serving others'
                },
                7: {
                    title: 'The Seeker',
                    emoji: '🔍',
                    description: 'Spiritual intellectuals with deep wisdom and analytical minds',
                    strengths: ['Wisdom', 'Analysis', 'Intuition', 'Spirituality'],
                    challenges: ['Isolation', 'Overthinking', 'Skepticism'],
                    lifePurpose: 'To seek truth, wisdom, and spiritual understanding',
                    career: 'Scientists, Researchers, Philosophers, Mystics',
                    spiritual: 'Balancing intellectual analysis with spiritual faith'
                },
                8: {
                    title: 'The Achiever',
                    emoji: '💎',
                    description: 'Ambitious leaders with strong material and spiritual power',
                    strengths: ['Ambition', 'Leadership', 'Material success', 'Authority'],
                    challenges: ['Materialism', 'Workaholism', 'Control issues'],
                    lifePurpose: 'To achieve success and use power for positive change',
                    career: 'Executives, Entrepreneurs, Politicians, Managers',
                    spiritual: 'Using material success for spiritual and humanitarian purposes'
                },
                9: {
                    title: 'The Humanitarian',
                    emoji: '🌍',
                    description: 'Compassionate visionaries with universal love and wisdom',
                    strengths: ['Compassion', 'Wisdom', 'Universality', 'Idealism'],
                    challenges: ['Detachment', 'Impracticality', 'Emotional distance'],
                    lifePurpose: 'To serve humanity and bring universal love to the world',
                    career: 'Humanitarians, Teachers, Healers, Artists',
                    spiritual: 'Learning to balance universal love with personal relationships'
                },
                11: {
                    title: 'The Intuitive',
                    emoji: '🔮',
                    description: 'Spiritual messengers with heightened intuition and psychic abilities',
                    strengths: ['Intuition', 'Inspiration', 'Spiritual insight', 'Vision'],
                    challenges: ['Nervous tension', 'Overwhelm', 'Unrealistic expectations'],
                    lifePurpose: 'To inspire others through spiritual wisdom and intuitive guidance',
                    career: 'Spiritual teachers, Psychics, Counselors, Visionaries',
                    spiritual: 'Learning to ground spiritual insights in practical reality'
                },
                22: {
                    title: 'The Master Builder',
                    emoji: '🏛️',
                    description: 'Visionary architects with the power to manifest dreams into reality',
                    strengths: ['Vision', 'Manifestation', 'Leadership', 'Practical wisdom'],
                    challenges: ['Overwhelm', 'Perfectionism', 'Unrealistic expectations'],
                    lifePurpose: 'To build great structures and manifest dreams for humanity',
                    career: 'Architects, Visionary leaders, Builders, Innovators',
                    spiritual: 'Balancing grand vision with practical implementation'
                },
                33: {
                    title: 'The Master Teacher',
                    emoji: '👁️',
                    description: 'Enlightened guides with the highest level of spiritual service',
                    strengths: ['Spiritual wisdom', 'Healing', 'Teaching', 'Compassion'],
                    challenges: ['Overwhelm', 'Self-sacrifice', 'Spiritual burnout'],
                    lifePurpose: 'To teach, heal, and guide others on their spiritual journey',
                    career: 'Spiritual teachers, Healers, Counselors, Guides',
                    spiritual: 'Learning to receive while giving spiritual service'
                }
            };

            const numerologyQuests = [
                {
                    id: 'numerology-1',
                    title: 'Master Number Discovery',
                    description: 'Discover if you have any master numbers (11, 22, 33) in your chart',
                    expReward: 25,
                    condition: () => [11, 22, 33].includes(profile.lifePathNumber) || 
                                   [11, 22, 33].includes(profile.destinyNumber) || 
                                   [11, 22, 33].includes(profile.personalityNumber)
                },
                {
                    id: 'numerology-2',
                    title: 'Life Path Exploration',
                    description: 'Read the detailed interpretation of your Life Path Number',
                    expReward: 20,
                    condition: () => true
                },
                {
                    id: 'numerology-3',
                    title: 'Destiny Number Study',
                    description: 'Explore your Destiny Number and its spiritual significance',
                    expReward: 20,
                    condition: () => true
                },
                {
                    id: 'numerology-4',
                    title: 'Personality Number Insight',
                    description: 'Understand how your Personality Number affects relationships',
                    expReward: 20,
                    condition: () => true
                },
                {
                    id: 'numerology-5',
                    title: 'Number Harmony Analysis',
                    description: 'Analyze the relationship between your three core numbers',
                    expReward: 30,
                    condition: () => true
                }
            ];

            const completeQuest = (questId, expReward) => {
                if (!completedQuests.includes(questId)) {
                    setCompletedQuests([...completedQuests, questId]);
                    addExperience(expReward);
                }
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center gap-4 mb-8">
                        <button
                            onClick={() => onNavigate('dashboard')}
                            className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                        >
                            ←
                        </button>
                        <h1 className="heading-cosmic text-3xl font-bold">Numerology Calculator</h1>
                    </div>

                    <div className="space-y-6">
                        <motion.div
                            initial={{ x: -50, opacity: 0 }}
                            animate={{ x: 0, opacity: 1 }}
                            transition={{ delay: 0.2 }}
                            className="cosmic-card cursor-pointer hover:scale-105 transition-transform"
                            onClick={() => setSelectedNumber(profile.lifePathNumber)}
                        >
                            <div className="text-center mb-4">
                                <div className="w-16 h-16 mx-auto rounded-full bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center text-2xl font-bold text-white mb-3">
                                    {profile.lifePathNumber}
                                </div>
                                <h3 className="text-xl font-semibold text-purple-300">Life Path Number</h3>
                                <p className="text-sm text-gray-400 mt-2">
                                    Your spiritual journey and life purpose
                                </p>
                                <p className="text-xs text-purple-300 mt-2">Click to explore</p>
                            </div>
                        </motion.div>

                        <motion.div
                            initial={{ x: 50, opacity: 0 }}
                            animate={{ x: 0, opacity: 1 }}
                            transition={{ delay: 0.4 }}
                            className="cosmic-card cursor-pointer hover:scale-105 transition-transform"
                            onClick={() => setSelectedNumber(profile.destinyNumber)}
                        >
                            <div className="text-center mb-4">
                                <div className="w-16 h-16 mx-auto rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-2xl font-bold text-white mb-3">
                                    {profile.destinyNumber}
                                </div>
                                <h3 className="text-xl font-semibold text-purple-300">Destiny Number</h3>
                                <p className="text-sm text-gray-400 mt-2">
                                    Your life's purpose and ultimate goals
                                </p>
                                <p className="text-xs text-purple-300 mt-2">Click to explore</p>
                            </div>
                        </motion.div>

                        <motion.div
                            initial={{ y: 50, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            transition={{ delay: 0.6 }}
                            className="cosmic-card cursor-pointer hover:scale-105 transition-transform"
                            onClick={() => setSelectedNumber(profile.personalityNumber)}
                        >
                            <div className="text-center mb-4">
                                <div className="w-16 h-16 mx-auto rounded-full bg-gradient-to-r from-green-400 to-blue-500 flex items-center justify-center text-2xl font-bold text-white mb-3">
                                    {profile.personalityNumber}
                                </div>
                                <h3 className="text-xl font-semibold text-purple-300">Personality Number</h3>
                                <p className="text-sm text-gray-400 mt-2">
                                    How others perceive you
                                </p>
                                <p className="text-xs text-purple-300 mt-2">Click to explore</p>
                            </div>
                        </motion.div>
                    </div>

                    {/* Number Interpretation Modal */}
                    {selectedNumber && numberInterpretations[selectedNumber] && (
                        <motion.div
                            initial={{ opacity: 0, scale: 0.9 }}
                            animate={{ opacity: 1, scale: 1 }}
                            className="cosmic-card mt-6"
                        >
                            <div className="flex items-center gap-4 mb-4">
                                <div className="text-4xl">{numberInterpretations[selectedNumber].emoji}</div>
                                <div>
                                    <h2 className="text-2xl font-bold text-purple-300">{numberInterpretations[selectedNumber].title}</h2>
                                    <p className="text-gray-300">{numberInterpretations[selectedNumber].description}</p>
                                </div>
                            </div>

                            <div className="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 className="text-lg font-semibold text-green-300 mb-3">Strengths</h3>
                                    <div className="flex flex-wrap gap-2">
                                        {numberInterpretations[selectedNumber].strengths.map((strength, index) => (
                                            <span key={index} className="px-3 py-1 bg-green-500/20 text-green-300 rounded-full text-sm">
                                                {strength}
                                            </span>
                                        ))}
                                    </div>
                                </div>

                                <div>
                                    <h3 className="text-lg font-semibold text-red-300 mb-3">Challenges</h3>
                                    <div className="flex flex-wrap gap-2">
                                        {numberInterpretations[selectedNumber].challenges.map((challenge, index) => (
                                            <span key={index} className="px-3 py-1 bg-red-500/20 text-red-300 rounded-full text-sm">
                                                {challenge}
                                            </span>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-4 mt-6">
                                <div>
                                    <h3 className="text-lg font-semibold text-blue-300 mb-2">Life Purpose</h3>
                                    <p className="text-gray-300">{numberInterpretations[selectedNumber].lifePurpose}</p>
                                </div>

                                <div>
                                    <h3 className="text-lg font-semibold text-yellow-300 mb-2">Career Paths</h3>
                                    <p className="text-gray-300">{numberInterpretations[selectedNumber].career}</p>
                                </div>

                                <div>
                                    <h3 className="text-lg font-semibold text-purple-300 mb-2">Spiritual Lesson</h3>
                                    <p className="text-gray-300">{numberInterpretations[selectedNumber].spiritual}</p>
                                </div>
                            </div>

                            <button
                                onClick={() => setSelectedNumber(null)}
                                className="glow-button w-full mt-6"
                            >
                                Close Interpretation
                            </button>
                        </motion.div>
                    )}

                    {/* Numerology Quests */}
                    <motion.div
                        initial={{ y: 50, opacity: 0 }}
                        animate={{ y: 0, opacity: 1 }}
                        transition={{ delay: 0.8 }}
                        className="space-y-4 mt-8"
                    >
                        <h3 className="text-lg font-semibold text-purple-300 mb-4">Numerology Quests</h3>
                        {numerologyQuests.map(quest => (
                            <div
                                key={quest.id}
                                className={`cosmic-card p-4 ${
                                    completedQuests.includes(quest.id) 
                                        ? 'bg-green-500/10 border-green-500/30' 
                                        : ''
                                }`}
                            >
                                <div className="flex items-start justify-between">
                                    <div className="flex-1">
                                        <h4 className="font-semibold text-gray-200 mb-1">{quest.title}</h4>
                                        <p className="text-sm text-gray-400 mb-2">{quest.description}</p>
                                        <div className="flex items-center gap-2 text-xs text-pink-300">
                                            <span>🌟 {quest.expReward} XP</span>
                                            {completedQuests.includes(quest.id) && (
                                                <span className="text-green-400">✓ Completed</span>
                                            )}
                                        </div>
                                    </div>
                                    {!completedQuests.includes(quest.id) && quest.condition() && (
                                        <button
                                            onClick={() => completeQuest(quest.id, quest.expReward)}
                                            className="glow-button text-sm"
                                        >
                                            Complete
                                        </button>
                                    )}
                                    {completedQuests.includes(quest.id) && (
                                        <div className="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                                            <span className="text-green-400 text-lg">✓</span>
                                        </div>
                                    )}
                                </div>
                            </div>
                        ))}
                    </motion.div>
                </div>
            );
        };

        // Crystal Data
        const CRYSTALS = [
          {
            name: 'Citrine',
            emoji: '🔶',
            image: '',
            description: 'Citrine boosts confidence, joy, and manifestation. It is the stone of abundance and personal power.',
            use: 'Carry in your pocket, meditate with it, or wear as a bracelet.',
            signs: ['Leo', 'Gemini', 'Aries'],
            numbers: [3, 1],
            intention: ['Confidence', 'Manifestation', 'Joy'],
            element: 'Fire'
          },
          {
            name: 'Amethyst',
            emoji: '💜',
            image: '',
            description: 'Amethyst calms the mind and enhances intuition. It is a stone of spiritual protection and clarity.',
            use: 'Place under your pillow, meditate with it, or wear as a pendant.',
            signs: ['Pisces', 'Aquarius', 'Sagittarius'],
            numbers: [7, 2],
            intention: ['Calm', 'Intuition', 'Clarity'],
            element: 'Water'
          },
          {
            name: 'Rose Quartz',
            emoji: '🌸',
            image: '',
            description: 'Rose Quartz opens the heart to love, compassion, and healing. It is the stone of unconditional love.',
            use: 'Keep near your heart, meditate with it, or place by your bed.',
            signs: ['Taurus', 'Libra', 'Cancer'],
            numbers: [6, 9],
            intention: ['Love', 'Compassion', 'Healing'],
            element: 'Water'
          },
          {
            name: 'Black Tourmaline',
            emoji: '⚫',
            image: '',
            description: 'Black Tourmaline protects against negativity and grounds your energy.',
            use: 'Carry for protection, place at entryways, or use in meditation.',
            signs: ['Capricorn', 'Scorpio'],
            numbers: [4, 8],
            intention: ['Protection', 'Grounding'],
            element: 'Earth'
          },
          {
            name: 'Clear Quartz',
            emoji: '💎',
            image: '',
            description: 'Clear Quartz amplifies energy and intention. It is the master healer and energy amplifier.',
            use: 'Use to amplify other crystals, program with intentions, or place in your space.',
            signs: ['All Signs'],
            numbers: [1, 4],
            intention: ['Amplification', 'Clarity', 'Healing'],
            element: 'Air'
          },
          {
            name: 'Lapis Lazuli',
            emoji: '🔷',
            image: '',
            description: 'Lapis Lazuli enhances communication and wisdom. It opens the third eye and throat chakra.',
            use: 'Wear as a pendant, meditate with it, or place on your throat.',
            signs: ['Sagittarius', 'Pisces', 'Libra'],
            numbers: [3, 6],
            intention: ['Communication', 'Wisdom', 'Truth'],
            element: 'Water'
          },
          {
            name: 'Tiger\'s Eye',
            emoji: '🐯',
            image: '',
            description: 'Tiger\'s Eye provides protection and courage. It helps with decision-making and personal power.',
            use: 'Carry for protection, wear as jewelry, or place in your workspace.',
            signs: ['Leo', 'Aries', 'Capricorn'],
            numbers: [1, 8],
            intention: ['Protection', 'Courage', 'Power'],
            element: 'Fire'
          },
          {
            name: 'Moonstone',
            emoji: '🌙',
            image: '',
            description: 'Moonstone enhances intuition and feminine energy. It connects you to lunar cycles.',
            use: 'Wear during full moon, meditate with it, or place under your pillow.',
            signs: ['Cancer', 'Pisces', 'Scorpio'],
            numbers: [2, 7],
            intention: ['Intuition', 'Feminine Energy', 'Cycles'],
            element: 'Water'
          }
        ];

        // Crystal Companion Screen
        const CrystalCompanionScreen = ({ profile, onBack, onAddToRituals }) => {
          // Suggest a crystal based on sun, moon, and life path
          function suggestCrystal(profile) {
            if (!profile) return CRYSTALS[0];
            // Priority: sign match, then number match
            let bySign = CRYSTALS.find(c => c.signs.includes(profile.sunSign) || c.signs.includes(profile.moonSign));
            if (bySign) return bySign;
            let byNumber = CRYSTALS.find(c => c.numbers.includes(profile.lifePathNumber));
            return byNumber || CRYSTALS[0];
          }
          const crystal = suggestCrystal(profile);

          // Animation: floating glitter
          useEffect(() => {
            const container = document.getElementById('crystal-glitter');
            if (!container) return;
            let running = true;
            function spawnGlitter() {
              if (!running) return;
              const glitter = document.createElement('div');
              glitter.style.position = 'absolute';
              glitter.style.left = Math.random() * 90 + '%';
              glitter.style.top = Math.random() * 90 + '%';
              glitter.style.width = glitter.style.height = Math.random() * 8 + 4 + 'px';
              glitter.style.background = 'radial-gradient(circle, #fffbe6 0%, #ffe4fa 80%, transparent 100%)';
              glitter.style.borderRadius = '50%';
              glitter.style.opacity = 0.7;
              glitter.style.pointerEvents = 'none';
              glitter.style.zIndex = 1;
              glitter.style.animation = 'crystal-glitter-float 2.5s linear forwards';
              container.appendChild(glitter);
              setTimeout(() => glitter.remove(), 2500);
              setTimeout(spawnGlitter, Math.random() * 600 + 400);
            }
            spawnGlitter();
            return () => { running = false; };
          }, []);

          return (
            <div className="min-h-screen flex flex-col items-center justify-center p-4 relative">
              <button
                onClick={onBack}
                className="absolute top-4 left-4 p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors z-20"
              >
                ←
              </button>
              <div id="crystal-glitter" style={{ position: 'absolute', inset: 0, pointerEvents: 'none', zIndex: 0 }} />
              <motion.div
                initial={{ y: 40, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ duration: 0.7 }}
                className="cosmic-card max-w-md w-full relative z-10"
              >
                <div className="text-center mb-6">
                  <h2 className="heading-cosmic text-2xl font-bold mb-2">Your Healing Stone of the Day</h2>
                  <div className="text-6xl mb-2" aria-label={crystal.name}>{crystal.emoji}</div>
                  <h3 className="text-xl font-semibold mb-2">{crystal.name}</h3>
                  <p className="text-gray-300 mb-2">{crystal.description}</p>
                  <div className="text-sm text-purple-200 mb-2">Spiritual Use: {crystal.use}</div>
                  <div className="text-xs text-pink-200 mb-2">Signs: {crystal.signs.join(', ')} | Numbers: {crystal.numbers.join(', ')}</div>
                </div>
                <button
                  className="glow-button w-full mt-2"
                  onClick={() => onAddToRituals(crystal)}
                >
                  ✨ Add to My Rituals
                </button>
              </motion.div>
            </div>
          );
        };

        // Stone Remedies Library Screen
        const StoneLibraryScreen = ({ onBack, onAddToRituals }) => {
            const [filter, setFilter] = useState('all');
            const [searchTerm, setSearchTerm] = useState('');

            const filterOptions = [
                { value: 'all', label: 'All Stones' },
                { value: 'anxiety', label: 'Anxiety' },
                { value: 'clarity', label: 'Clarity' },
                { value: 'luck', label: 'Luck' },
                { value: 'love', label: 'Love' },
                { value: 'protection', label: 'Protection' },
                { value: 'confidence', label: 'Confidence' },
                { value: 'intuition', label: 'Intuition' }
            ];

            const filteredCrystals = CRYSTALS.filter(crystal => {
                const matchesFilter = filter === 'all' || crystal.intention.some(intent => 
                    intent.toLowerCase().includes(filter.toLowerCase())
                );
                const matchesSearch = crystal.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    crystal.description.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesFilter && matchesSearch;
            });

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onBack}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Stone Remedies Library</h1>
                        </div>
                    </div>

                    {/* Search and Filter */}
                    <div className="space-y-4 mb-6">
                        <input
                            type="text"
                            placeholder="Search stones..."
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            className="magical-input"
                        />
                        
                        <div className="flex flex-wrap gap-2">
                            {filterOptions.map(option => (
                                <button
                                    key={option.value}
                                    onClick={() => setFilter(option.value)}
                                    className={`px-3 py-1 rounded-full text-sm transition-colors ${
                                        filter === option.value
                                            ? 'bg-purple-500 text-white'
                                            : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                                    }`}
                                >
                                    {option.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Crystal Grid */}
                    <div className="space-y-4">
                        {filteredCrystals.map((crystal, index) => (
                            <motion.div
                                key={crystal.name}
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: index * 0.1 }}
                                className="cosmic-card"
                            >
                                <div className="flex items-start gap-4">
                                    <div className="text-4xl crystal-glow">
                                        {crystal.emoji}
                                    </div>
                                    <div className="flex-1">
                                        <div className="flex items-center justify-between mb-2">
                                            <h3 className="text-xl font-semibold text-purple-300">{crystal.name}</h3>
                                            <button
                                                onClick={() => onAddToRituals(crystal)}
                                                className="glow-button text-sm"
                                            >
                                                Add to Rituals
                                            </button>
                                        </div>
                                        <p className="text-gray-300 mb-2">{crystal.description}</p>
                                        <p className="text-sm text-purple-200 mb-2">Use: {crystal.use}</p>
                                        <div className="flex flex-wrap gap-2 text-xs">
                                            <span className="px-2 py-1 bg-blue-500/20 text-blue-300 rounded">
                                                {crystal.element}
                                            </span>
                                            <span className="px-2 py-1 bg-green-500/20 text-green-300 rounded">
                                                {crystal.signs.join(', ')}
                                            </span>
                                            <span className="px-2 py-1 bg-pink-500/20 text-pink-300 rounded">
                                                Numbers: {crystal.numbers.join(', ')}
                                            </span>
                                        </div>
                                        <div className="flex flex-wrap gap-1 mt-2">
                                            {crystal.intention.map(intent => (
                                                <span key={intent} className="px-2 py-1 bg-purple-500/20 text-purple-300 rounded text-xs">
                                                    {intent}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </motion.div>
                        ))}
                    </div>
                </div>
            );
        };

        // Color Study Dashboard
        const ColorStudyScreen = ({ profile, onBack }) => {
            const [selectedColor, setSelectedColor] = useState(null);

            // Color data based on numerology and signs
            const colorData = {
                yellow: {
                    name: 'Yellow',
                    emoji: '💛',
                    description: 'Enhances confidence, communication, and mental clarity',
                    benefits: 'Boosts optimism, creativity, and intellectual pursuits',
                    dos: 'Wear on Thursdays, use for studying, creative projects',
                    donts: 'Avoid when feeling anxious or overstimulated',
                    signs: ['Gemini', 'Leo', 'Sagittarius'],
                    numbers: [3, 5, 7]
                },
                pink: {
                    name: 'Pink',
                    emoji: '💗',
                    description: 'Opens the heart to love, compassion, and healing',
                    benefits: 'Promotes emotional balance, self-love, and harmony',
                    dos: 'Wear for relationships, meditation, self-care',
                    donts: 'Avoid when needing to be assertive or strong',
                    signs: ['Taurus', 'Libra', 'Cancer'],
                    numbers: [2, 6, 9]
                },
                blue: {
                    name: 'Blue',
                    emoji: '💙',
                    description: 'Calms the mind and enhances intuition',
                    benefits: 'Promotes peace, wisdom, and spiritual connection',
                    dos: 'Wear for meditation, sleep, spiritual work',
                    donts: 'Avoid when needing energy or excitement',
                    signs: ['Pisces', 'Cancer', 'Scorpio'],
                    numbers: [2, 7, 11]
                },
                purple: {
                    name: 'Purple',
                    emoji: '💜',
                    description: 'Connects to higher consciousness and spiritual wisdom',
                    benefits: 'Enhances intuition, psychic abilities, and transformation',
                    dos: 'Wear for spiritual work, meditation, healing',
                    donts: 'Avoid when needing to be grounded or practical',
                    signs: ['Pisces', 'Aquarius', 'Sagittarius'],
                    numbers: [7, 9, 11]
                },
                green: {
                    name: 'Green',
                    emoji: '💚',
                    description: 'Promotes growth, healing, and abundance',
                    benefits: 'Brings balance, prosperity, and natural healing',
                    dos: 'Wear for growth, healing, financial matters',
                    donts: 'Avoid when feeling stagnant or stuck',
                    signs: ['Taurus', 'Virgo', 'Capricorn'],
                    numbers: [4, 6, 8]
                },
                orange: {
                    name: 'Orange',
                    emoji: '🧡',
                    description: 'Boosts creativity, confidence, and social energy',
                    benefits: 'Enhances enthusiasm, adventure, and self-expression',
                    dos: 'Wear for social events, creative projects, confidence',
                    donts: 'Avoid when needing calm or rest',
                    signs: ['Aries', 'Leo', 'Sagittarius'],
                    numbers: [1, 3, 5]
                }
            };

            // Get recommended colors based on profile
            const getRecommendedColors = (profile) => {
                if (!profile) return Object.keys(colorData);
                const recommended = [];
                Object.entries(colorData).forEach(([color, data]) => {
                    if (data.signs.includes(profile.sunSign) || data.signs.includes(profile.moonSign) ||
                        data.numbers.includes(profile.lifePathNumber)) {
                        recommended.push(color);
                    }
                });
                return recommended.length > 0 ? recommended : Object.keys(colorData);
            };

            const recommendedColors = getRecommendedColors(profile);

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onBack}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Your Aura Color Guide</h1>
                        </div>
                    </div>

                    {/* Recommended Colors */}
                    <motion.div
                        initial={{ y: 20, opacity: 0 }}
                        animate={{ y: 0, opacity: 1 }}
                        className="cosmic-card mb-6"
                    >
                        <h2 className="text-xl font-semibold text-purple-300 mb-4">Your Recommended Colors</h2>
                        <div className="grid grid-cols-3 gap-4">
                            {recommendedColors.map((color, index) => (
                                <motion.div
                                    key={color}
                                    initial={{ scale: 0, opacity: 0 }}
                                    animate={{ scale: 1, opacity: 1 }}
                                    transition={{ delay: index * 0.1 }}
                                    className="text-center cursor-pointer"
                                    onClick={() => setSelectedColor(color)}
                                >
                                    <div 
                                        className={`color-swatch mx-auto mb-2 ${
                                            selectedColor === color ? 'ring-4 ring-purple-400' : ''
                                        }`}
                                        style={{ 
                                            background: color === 'yellow' ? '#fbbf24' :
                                                       color === 'pink' ? '#ec4899' :
                                                       color === 'blue' ? '#3b82f6' :
                                                       color === 'purple' ? '#8b5cf6' :
                                                       color === 'green' ? '#10b981' :
                                                       '#f97316'
                                        }}
                                    >
                                        <div className="text-2xl mt-3">{colorData[color].emoji}</div>
                                    </div>
                                    <p className="text-sm text-gray-300">{colorData[color].name}</p>
                                </motion.div>
                            ))}
                        </div>
                    </motion.div>

                    {/* Color Details */}
                    {selectedColor && (
                        <motion.div
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            className="cosmic-card"
                        >
                            <div className="flex items-center gap-4 mb-4">
                                <div 
                                    className="color-swatch"
                                    style={{ 
                                        background: selectedColor === 'yellow' ? '#fbbf24' :
                                                   selectedColor === 'pink' ? '#ec4899' :
                                                   selectedColor === 'blue' ? '#3b82f6' :
                                                   selectedColor === 'purple' ? '#8b5cf6' :
                                                   selectedColor === 'green' ? '#10b981' :
                                                   '#f97316'
                                    }}
                                >
                                    <div className="text-3xl mt-4">{colorData[selectedColor].emoji}</div>
                                </div>
                                <div>
                                    <h3 className="text-xl font-semibold text-purple-300">{colorData[selectedColor].name}</h3>
                                    <p className="text-gray-300">{colorData[selectedColor].description}</p>
                                </div>
                            </div>
                            
                            <div className="space-y-4">
                                <div>
                                    <h4 className="text-lg font-semibold text-green-300 mb-2">Spiritual Benefits</h4>
                                    <p className="text-gray-300">{colorData[selectedColor].benefits}</p>
                                </div>
                                
                                <div>
                                    <h4 className="text-lg font-semibold text-blue-300 mb-2">Do's</h4>
                                    <p className="text-gray-300">{colorData[selectedColor].dos}</p>
                                </div>
                                
                                <div>
                                    <h4 className="text-lg font-semibold text-red-300 mb-2">Don'ts</h4>
                                    <p className="text-gray-300">{colorData[selectedColor].donts}</p>
                                </div>
                            </div>
                        </motion.div>
                    )}
                </div>
            );
        };

        // Color Crystal Fusion Screen
        const ColorCrystalFusionScreen = ({ profile, onBack, addExperience }) => {
            const [selectedColor, setSelectedColor] = useState(null);
            const [selectedCrystal, setSelectedCrystal] = useState(null);
            const [fusionResult, setFusionResult] = useState(null);

            const colorOptions = [
                { name: 'Yellow', emoji: '💛', value: 'yellow', energy: 'Solar' },
                { name: 'Pink', emoji: '💗', value: 'pink', energy: 'Heart' },
                { name: 'Blue', emoji: '💙', value: 'blue', energy: 'Water' },
                { name: 'Purple', emoji: '💜', value: 'purple', energy: 'Spirit' },
                { name: 'Green', emoji: '💚', value: 'green', energy: 'Earth' },
                { name: 'Orange', emoji: '🧡', value: 'orange', energy: 'Fire' }
            ];

            const crystalOptions = CRYSTALS.slice(0, 6); // Use first 6 crystals for fusion

            const createFusion = () => {
                if (!selectedColor || !selectedCrystal) return;

                const color = colorOptions.find(c => c.value === selectedColor);
                const crystal = selectedCrystal;

                // Create fusion based on compatibility
                const fusion = {
                    name: `${color.name} ${crystal.name}`,
                    emoji: `${color.emoji}${crystal.emoji}`,
                    description: `A powerful fusion of ${color.name.toLowerCase()} energy and ${crystal.name.toLowerCase()} properties.`,
                    power: Math.floor(Math.random() * 50) + 50, // 50-100
                    effects: [
                        `Enhanced ${color.energy.toLowerCase()} energy`,
                        `Amplified ${crystal.intention[0].toLowerCase()} properties`,
                        'Increased spiritual connection',
                        'Balanced chakra alignment'
                    ],
                    ritual: `Meditate with this fusion for 10 minutes daily, focusing on ${crystal.intention[0].toLowerCase()} while visualizing ${color.name.toLowerCase()} light surrounding you.`
                };

                setFusionResult(fusion);
                addExperience(25); // Fusion bonus
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onBack}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Color Crystal Fusion</h1>
                        </div>
                    </div>

                    {!fusionResult ? (
                        <div className="space-y-6">
                            {/* Color Selection */}
                            <motion.div
                                initial={{ y: 20, opacity: 0 }}
                                animate={{ y: 0, opacity: 1 }}
                                className="cosmic-card"
                            >
                                <h2 className="text-xl font-semibold text-purple-300 mb-4">Choose Your Color Energy</h2>
                                <div className="grid grid-cols-3 gap-4">
                                    {colorOptions.map((color, index) => (
                                        <motion.button
                                            key={color.value}
                                            initial={{ scale: 0, opacity: 0 }}
                                            animate={{ scale: 1, opacity: 1 }}
                                            transition={{ delay: index * 0.1 }}
                                            onClick={() => setSelectedColor(color.value)}
                                            className={`p-4 rounded-lg text-center transition-all ${
                                                selectedColor === color.value
                                                    ? 'bg-purple-500/30 ring-2 ring-purple-400'
                                                    : 'bg-gray-700/50 hover:bg-gray-600/50'
                                            }`}
                                        >
                                            <div className="text-3xl mb-2">{color.emoji}</div>
                                            <div className="text-sm font-semibold">{color.name}</div>
                                            <div className="text-xs text-gray-400">{color.energy}</div>
                                        </motion.button>
                                    ))}
                                </div>
                            </motion.div>

                            {/* Crystal Selection */}
                            <motion.div
                                initial={{ y: 20, opacity: 0 }}
                                animate={{ y: 0, opacity: 1 }}
                                transition={{ delay: 0.2 }}
                                className="cosmic-card"
                            >
                                <h2 className="text-xl font-semibold text-purple-300 mb-4">Choose Your Crystal</h2>
                                <div className="grid grid-cols-2 gap-4">
                                    {crystalOptions.map((crystal, index) => (
                                        <motion.button
                                            key={crystal.name}
                                            initial={{ scale: 0, opacity: 0 }}
                                            animate={{ scale: 1, opacity: 1 }}
                                            transition={{ delay: index * 0.1 + 0.3 }}
                                            onClick={() => setSelectedCrystal(crystal)}
                                            className={`p-4 rounded-lg text-center transition-all ${
                                                selectedCrystal?.name === crystal.name
                                                    ? 'bg-purple-500/30 ring-2 ring-purple-400'
                                                    : 'bg-gray-700/50 hover:bg-gray-600/50'
                                            }`}
                                        >
                                            <div className="text-2xl mb-2">{crystal.emoji}</div>
                                            <div className="text-sm font-semibold">{crystal.name}</div>
                                            <div className="text-xs text-gray-400">{crystal.intention.join(', ')}</div>
                                        </motion.button>
                                    ))}
                                </div>
                            </motion.div>

                            {/* Fusion Button */}
                            {selectedColor && selectedCrystal && (
                                <motion.div
                                    initial={{ opacity: 0, y: 20 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    className="text-center"
                                >
                                    <button
                                        onClick={createFusion}
                                        className="glow-button text-lg px-8 py-4"
                                    >
                                        ✨ Create Fusion ✨
                                    </button>
                                </motion.div>
                            )}
                        </div>
                    ) : (
                        /* Fusion Result */
                        <motion.div
                            initial={{ opacity: 0, scale: 0.9 }}
                            animate={{ opacity: 1, scale: 1 }}
                            className="cosmic-card text-center"
                        >
                            <div className="text-6xl mb-4 crystal-glow">{fusionResult.emoji}</div>
                            <h2 className="text-2xl font-bold text-purple-300 mb-2">{fusionResult.name}</h2>
                            <p className="text-gray-300 mb-4">{fusionResult.description}</p>
                            
                            <div className="mb-4">
                                <span className="text-lg font-semibold text-yellow-300">Power Level: {fusionResult.power}%</span>
                            </div>

                            <div className="space-y-3 mb-6">
                                <h3 className="text-lg font-semibold text-green-300">Effects:</h3>
                                {fusionResult.effects.map((effect, index) => (
                                    <div key={index} className="text-gray-300">• {effect}</div>
                                ))}
                            </div>

                            <div className="mb-6">
                                <h3 className="text-lg font-semibold text-blue-300 mb-2">Ritual:</h3>
                                <p className="text-gray-300 text-sm">{fusionResult.ritual}</p>
                            </div>

                            <button
                                onClick={() => setFusionResult(null)}
                                className="glow-button"
                            >
                                Create Another Fusion
                            </button>
                        </motion.div>
                    )}
                </div>
            );
        };

        // Trait Fusion Screen
        const TraitFusionScreen = ({ profile, onBack, addExperience }) => {
            const [selectedTraits, setSelectedTraits] = useState([]);
            const [fusionResult, setFusionResult] = useState(null);

            const traitOptions = [
                { name: 'Confidence', emoji: '💪', element: 'Fire', description: 'Inner strength and self-assurance' },
                { name: 'Intuition', emoji: '🔮', element: 'Water', description: 'Psychic awareness and gut feelings' },
                { name: 'Creativity', emoji: '🎨', element: 'Air', description: 'Artistic expression and innovation' },
                { name: 'Wisdom', emoji: '🧠', element: 'Earth', description: 'Deep knowledge and understanding' },
                { name: 'Compassion', emoji: '💝', element: 'Water', description: 'Empathy and loving kindness' },
                { name: 'Courage', emoji: '⚡', element: 'Fire', description: 'Bravery and bold action' },
                { name: 'Patience', emoji: '🌱', element: 'Earth', description: 'Calm endurance and growth' },
                { name: 'Harmony', emoji: '🎵', element: 'Air', description: 'Balance and peaceful energy' }
            ];

            const handleTraitSelect = (trait) => {
                if (selectedTraits.find(t => t.name === trait.name)) {
                    setSelectedTraits(selectedTraits.filter(t => t.name !== trait.name));
                } else if (selectedTraits.length < 3) {
                    setSelectedTraits([...selectedTraits, trait]);
                }
            };

            const createTraitFusion = () => {
                if (selectedTraits.length < 2) return;

                const elements = selectedTraits.map(t => t.element);
                const uniqueElements = [...new Set(elements)];
                
                let fusionName, fusionEmoji, fusionDescription, power;

                if (uniqueElements.length === 1) {
                    // Same element - powerful fusion
                    fusionName = `${uniqueElements[0]} Master`;
                    fusionEmoji = elements[0] === 'Fire' ? '🔥' : elements[0] === 'Water' ? '🌊' : elements[0] === 'Air' ? '💨' : '🌍';
                    fusionDescription = `Mastery of ${uniqueElements[0].toLowerCase()} energy, amplifying all related traits.`;
                    power = 95;
                } else if (uniqueElements.length === 2) {
                    // Two elements - balanced fusion
                    fusionName = `${uniqueElements[0]}-${uniqueElements[1]} Harmonizer`;
                    fusionEmoji = '⚖️';
                    fusionDescription = `Perfect balance between ${uniqueElements[0].toLowerCase()} and ${uniqueElements[1].toLowerCase()} energies.`;
                    power = 85;
                } else {
                    // Three elements - complex fusion
                    fusionName = 'Cosmic Trinity';
                    fusionEmoji = '🌟';
                    fusionDescription = 'Rare fusion of three elemental energies, creating cosmic harmony.';
                    power = 100;
                }

                const fusion = {
                    name: fusionName,
                    emoji: fusionEmoji,
                    description: fusionDescription,
                    power: power,
                    traits: selectedTraits.map(t => t.name),
                    elements: uniqueElements,
                    benefits: [
                        `Enhanced ${selectedTraits[0].name.toLowerCase()}`,
                        `Amplified ${selectedTraits[1].name.toLowerCase()}`,
                        selectedTraits[2] ? `Strengthened ${selectedTraits[2].name.toLowerCase()}` : 'Elemental harmony',
                        'Increased spiritual awareness'
                    ],
                    ritual: `Meditate for 15 minutes daily, focusing on each trait: ${selectedTraits.map(t => t.name).join(', ')}. Visualize their energies merging into a unified force.`
                };

                setFusionResult(fusion);
                addExperience(30); // Trait fusion bonus
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onBack}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Trait Fusion</h1>
                        </div>
                    </div>

                    {!fusionResult ? (
                        <div className="space-y-6">
                            <motion.div
                                initial={{ y: 20, opacity: 0 }}
                                animate={{ y: 0, opacity: 1 }}
                                className="cosmic-card"
                            >
                                <h2 className="text-xl font-semibold text-purple-300 mb-4">
                                    Select 2-3 Traits to Fuse ({selectedTraits.length}/3)
                                </h2>
                                <div className="grid grid-cols-2 gap-4">
                                    {traitOptions.map((trait, index) => (
                                        <motion.button
                                            key={trait.name}
                                            initial={{ scale: 0, opacity: 0 }}
                                            animate={{ scale: 1, opacity: 1 }}
                                            transition={{ delay: index * 0.1 }}
                                            onClick={() => handleTraitSelect(trait)}
                                            className={`p-4 rounded-lg text-center transition-all ${
                                                selectedTraits.find(t => t.name === trait.name)
                                                    ? 'bg-purple-500/30 ring-2 ring-purple-400'
                                                    : 'bg-gray-700/50 hover:bg-gray-600/50'
                                            }`}
                                        >
                                            <div className="text-2xl mb-2">{trait.emoji}</div>
                                            <div className="text-sm font-semibold">{trait.name}</div>
                                            <div className="text-xs text-gray-400 mb-1">{trait.element}</div>
                                            <div className="text-xs text-gray-500">{trait.description}</div>
                                        </motion.button>
                                    ))}
                                </div>
                            </motion.div>

                            {selectedTraits.length >= 2 && (
                                <motion.div
                                    initial={{ opacity: 0, y: 20 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    className="text-center"
                                >
                                    <button
                                        onClick={createTraitFusion}
                                        className="glow-button text-lg px-8 py-4"
                                    >
                                        ✨ Fuse Traits ✨
                                    </button>
                                </motion.div>
                            )}
                        </div>
                    ) : (
                        /* Fusion Result */
                        <motion.div
                            initial={{ opacity: 0, scale: 0.9 }}
                            animate={{ opacity: 1, scale: 1 }}
                            className="cosmic-card text-center"
                        >
                            <div className="text-6xl mb-4 crystal-glow">{fusionResult.emoji}</div>
                            <h2 className="text-2xl font-bold text-purple-300 mb-2">{fusionResult.name}</h2>
                            <p className="text-gray-300 mb-4">{fusionResult.description}</p>
                            
                            <div className="mb-4">
                                <span className="text-lg font-semibold text-yellow-300">Power Level: {fusionResult.power}%</span>
                            </div>

                            <div className="mb-4">
                                <h3 className="text-lg font-semibold text-blue-300 mb-2">Fused Traits:</h3>
                                <div className="flex flex-wrap justify-center gap-2">
                                    {fusionResult.traits.map(trait => (
                                        <span key={trait} className="px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-sm">
                                            {trait}
                                        </span>
                                    ))}
                                </div>
                            </div>

                            <div className="space-y-3 mb-6">
                                <h3 className="text-lg font-semibold text-green-300">Benefits:</h3>
                                {fusionResult.benefits.map((benefit, index) => (
                                    <div key={index} className="text-gray-300">• {benefit}</div>
                                ))}
                            </div>

                            <div className="mb-6">
                                <h3 className="text-lg font-semibold text-blue-300 mb-2">Ritual:</h3>
                                <p className="text-gray-300 text-sm">{fusionResult.ritual}</p>
                            </div>

                            <button
                                onClick={() => setFusionResult(null)}
                                className="glow-button"
                            >
                                Create Another Fusion
                            </button>
                        </motion.div>
                    )}
                </div>
            );
        };

        // Mission Screen
        const MissionScreen = ({ profile, onBack, addExperience }) => {
            const [currentMission, setCurrentMission] = useState(null);
            const [completedMissions, setCompletedMissions] = useState(() => {
                try {
                    const userId = localStorage.getItem('astro_quest_user_id');
                    return JSON.parse(localStorage.getItem(`astro_quest_missions_${userId}`) || '[]');
                } catch { return []; }
            });

            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                if (userId) {
                    localStorage.setItem(`astro_quest_missions_${userId}`, JSON.stringify(completedMissions));
                }
            }, [completedMissions]);

            const missions = [
                {
                    id: 'daily_meditation',
                    title: 'Daily Meditation',
                    emoji: '🧘',
                    description: 'Meditate for 10 minutes focusing on your life path number',
                    reward: 20,
                    type: 'daily',
                    requirement: 'Complete 10 minutes of focused meditation'
                },
                {
                    id: 'crystal_ritual',
                    title: 'Crystal Ritual',
                    emoji: '💎',
                    description: 'Perform a ritual with your recommended crystal',
                    reward: 30,
                    type: 'weekly',
                    requirement: 'Use your crystal in a spiritual practice'
                },
                {
                    id: 'color_meditation',
                    title: 'Color Meditation',
                    emoji: '🌈',
                    description: 'Meditate while visualizing your aura color',
                    reward: 25,
                    type: 'daily',
                    requirement: 'Visualize your color during meditation'
                },
                {
                    id: 'numerology_study',
                    title: 'Numerology Study',
                    emoji: '🔢',
                    description: 'Study the meaning of your life path number',
                    reward: 35,
                    type: 'weekly',
                    requirement: 'Learn about your life path number'
                },
                {
                    id: 'reflection_journal',
                    title: 'Reflection Journal',
                    emoji: '📝',
                    description: 'Write a reflection about your spiritual journey',
                    reward: 15,
                    type: 'daily',
                    requirement: 'Write a meaningful reflection entry'
                },
                {
                    id: 'fusion_creation',
                    title: 'Fusion Creation',
                    emoji: '✨',
                    description: 'Create a new trait or color fusion',
                    reward: 40,
                    type: 'weekly',
                    requirement: 'Complete a fusion ritual'
                }
            ];

            const startMission = (mission) => {
                setCurrentMission(mission);
            };

            const completeMission = (mission) => {
                setCompletedMissions(prev => [...prev, { ...mission, completedAt: new Date().toISOString() }]);
                addExperience(mission.reward);
                setCurrentMission(null);
                alert(`Mission completed! +${mission.reward} EXP`);
            };

            const isMissionCompleted = (missionId) => {
                return completedMissions.some(m => m.id === missionId);
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onBack}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Cosmic Missions</h1>
                        </div>
                    </div>

                    {currentMission ? (
                        /* Mission in Progress */
                        <motion.div
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            className="cosmic-card text-center"
                        >
                            <div className="text-6xl mb-4">{currentMission.emoji}</div>
                            <h2 className="text-2xl font-bold text-purple-300 mb-2">{currentMission.title}</h2>
                            <p className="text-gray-300 mb-4">{currentMission.description}</p>
                            
                            <div className="mb-6">
                                <h3 className="text-lg font-semibold text-blue-300 mb-2">Requirement:</h3>
                                <p className="text-gray-300">{currentMission.requirement}</p>
                            </div>

                            <div className="mb-6">
                                <span className="text-lg font-semibold text-yellow-300">Reward: +{currentMission.reward} EXP</span>
                            </div>

                            <div className="space-x-4">
                                <button
                                    onClick={() => setCurrentMission(null)}
                                    className="px-6 py-2 rounded-lg bg-gray-600 text-gray-300 hover:bg-gray-500 transition-colors"
                                >
                                    Cancel
                                </button>
                                <button
                                    onClick={() => completeMission(currentMission)}
                                    className="glow-button"
                                >
                                    Complete Mission
                                </button>
                            </div>
                        </motion.div>
                    ) : (
                        /* Mission List */
                        <div className="space-y-4">
                            {missions.map((mission, index) => (
                                <motion.div
                                    key={mission.id}
                                    initial={{ opacity: 0, y: 20 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    transition={{ delay: index * 0.1 }}
                                    className={`cosmic-card ${
                                        isMissionCompleted(mission.id) ? 'opacity-60' : ''
                                    }`}
                                >
                                    <div className="flex items-center justify-between">
                                        <div className="flex items-center gap-4">
                                            <div className="text-3xl">{mission.emoji}</div>
                                            <div>
                                                <h3 className="text-lg font-semibold text-purple-300">{mission.title}</h3>
                                                <p className="text-gray-300 text-sm">{mission.description}</p>
                                                <div className="flex items-center gap-2 mt-1">
                                                    <span className="text-xs text-yellow-300">+{mission.reward} EXP</span>
                                                    <span className="text-xs text-gray-400">• {mission.type}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            {isMissionCompleted(mission.id) ? (
                                                <span className="text-green-400 text-sm">✓ Completed</span>
                                            ) : (
                                                <button
                                                    onClick={() => startMission(mission)}
                                                    className="glow-button text-sm"
                                                >
                                                    Start
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                </motion.div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Crystal Shop Screen
        const CrystalShopScreen = ({ profile, onBack, addExperience }) => {
            const [purchasedCrystals, setPurchasedCrystals] = useState(() => {
                try {
                    const userId = localStorage.getItem('astro_quest_user_id');
                    return JSON.parse(localStorage.getItem(`astro_quest_purchased_crystals_${userId}`) || '[]');
                } catch { return []; }
            });

            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                if (userId) {
                    localStorage.setItem(`astro_quest_purchased_crystals_${userId}`, JSON.stringify(purchasedCrystals));
                }
            }, [purchasedCrystals]);

            const shopCrystals = [
                {
                    id: 'rare_amethyst',
                    name: 'Rare Amethyst',
                    emoji: '💎',
                    description: 'A rare and powerful amethyst with enhanced spiritual properties',
                    price: 100,
                    rarity: 'Rare',
                    effects: ['Enhanced intuition', 'Spiritual protection', 'Dream enhancement']
                },
                {
                    id: 'golden_citrine',
                    name: 'Golden Citrine',
                    emoji: '🔶',
                    description: 'A golden citrine that amplifies manifestation and abundance',
                    price: 150,
                    rarity: 'Epic',
                    effects: ['Manifestation boost', 'Wealth attraction', 'Confidence amplifier']
                },
                {
                    id: 'moonstone_pearl',
                    name: 'Moonstone Pearl',
                    emoji: '🌙',
                    description: 'A rare moonstone that enhances feminine energy and intuition',
                    price: 200,
                    rarity: 'Legendary',
                    effects: ['Lunar connection', 'Feminine power', 'Psychic abilities']
                },
                {
                    id: 'dragon_quartz',
                    name: 'Dragon Quartz',
                    emoji: '🐉',
                    description: 'A mythical quartz with dragon energy for protection and power',
                    price: 300,
                    rarity: 'Mythical',
                    effects: ['Dragon protection', 'Power amplification', 'Energy shielding']
                },
                {
                    id: 'cosmic_opal',
                    name: 'Cosmic Opal',
                    emoji: '✨',
                    description: 'A cosmic opal that connects to universal consciousness',
                    price: 500,
                    rarity: 'Cosmic',
                    effects: ['Universal connection', 'Consciousness expansion', 'Reality shifting']
                }
            ];

            const purchaseCrystal = (crystal) => {
                const { experienceData } = useExperience();
                if (experienceData.totalExp >= crystal.price) {
                    setPurchasedCrystals(prev => [...prev, { ...crystal, purchasedAt: new Date().toISOString() }]);
                    // Note: In a real implementation, you'd need to update the experience system here
                    alert(`${crystal.name} purchased successfully!`);
                } else {
                    alert(`Not enough EXP! You need ${crystal.price} EXP to purchase this crystal.`);
                }
            };

            const isPurchased = (crystalId) => {
                return purchasedCrystals.some(c => c.id === crystalId);
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onBack}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Crystal Shop</h1>
                        </div>
                    </div>

                    <div className="space-y-4">
                        {shopCrystals.map((crystal, index) => (
                            <motion.div
                                key={crystal.id}
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: index * 0.1 }}
                                className={`cosmic-card ${
                                    isPurchased(crystal.id) ? 'opacity-60' : ''
                                }`}
                            >
                                <div className="flex items-start justify-between">
                                    <div className="flex items-start gap-4">
                                        <div className="text-4xl crystal-glow">
                                            {crystal.emoji}
                                        </div>
                                        <div className="flex-1">
                                            <div className="flex items-center gap-2 mb-2">
                                                <h3 className="text-xl font-semibold text-purple-300">{crystal.name}</h3>
                                                <span className={`px-2 py-1 rounded text-xs ${
                                                    crystal.rarity === 'Rare' ? 'bg-blue-500/20 text-blue-300' :
                                                    crystal.rarity === 'Epic' ? 'bg-purple-500/20 text-purple-300' :
                                                    crystal.rarity === 'Legendary' ? 'bg-yellow-500/20 text-yellow-300' :
                                                    crystal.rarity === 'Mythical' ? 'bg-red-500/20 text-red-300' :
                                                    'bg-green-500/20 text-green-300'
                                                }`}>
                                                    {crystal.rarity}
                                                </span>
                                            </div>
                                            <p className="text-gray-300 mb-2">{crystal.description}</p>
                                            <div className="space-y-1">
                                                {crystal.effects.map((effect, idx) => (
                                                    <div key={idx} className="text-sm text-gray-400">• {effect}</div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-lg font-semibold text-yellow-300 mb-2">
                                            {crystal.price} EXP
                                        </div>
                                        {isPurchased(crystal.id) ? (
                                            <span className="text-green-400 text-sm">✓ Purchased</span>
                                        ) : (
                                            <button
                                                onClick={() => purchaseCrystal(crystal)}
                                                className="glow-button text-sm"
                                            >
                                                Purchase
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </motion.div>
                        ))}
                    </div>
                </div>
            );
        };

        // Vaastu Screen
        const VaastuScreen = ({ profile, onBack, addExperience }) => {
            const [selectedRoom, setSelectedRoom] = useState(null);
            const [completedFixes, setCompletedFixes] = useState(() => {
                try {
                    const userId = localStorage.getItem('astro_quest_user_id');
                    return JSON.parse(localStorage.getItem(`astro_quest_vaastu_fixes_${userId}`) || '[]');
                } catch { return []; }
            });

            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                if (userId) {
                    localStorage.setItem(`astro_quest_vaastu_fixes_${userId}`, JSON.stringify(completedFixes));
                }
            }, [completedFixes]);

            const rooms = [
                {
                    id: 'northeast',
                    name: 'Northeast (Ishaan)',
                    emoji: '🌅',
                    element: 'Water',
                    description: 'Sacred space for meditation and spiritual activities',
                    recommendations: [
                        'Place meditation cushions or altar here',
                        'Keep this area clean and clutter-free',
                        'Use white, light blue, or silver colors',
                        'Avoid heavy furniture or electronics'
                    ],
                    fixes: [
                        'Remove any clutter or heavy items',
                        'Add a small water feature or crystal',
                        'Place spiritual books or meditation items',
                        'Use soft, calming lighting'
                    ]
                },
                {
                    id: 'northwest',
                    name: 'Northwest (Vayavya)',
                    emoji: '💨',
                    element: 'Air',
                    description: 'Ideal for guest rooms and social interactions',
                    recommendations: [
                        'Perfect for guest bedrooms',
                        'Good for study or reading areas',
                        'Use light colors and airy fabrics',
                        'Keep windows open for fresh air'
                    ],
                    fixes: [
                        'Ensure good ventilation',
                        'Add plants for air purification',
                        'Use light, flowing curtains',
                        'Place wind chimes or bells'
                    ]
                },
                {
                    id: 'southeast',
                    name: 'Southeast (Agneya)',
                    emoji: '🔥',
                    element: 'Fire',
                    description: 'Best location for kitchen and fire-related activities',
                    recommendations: [
                        'Ideal for kitchen placement',
                        'Good for electrical equipment',
                        'Use red, orange, or yellow colors',
                        'Keep this area well-lit and warm'
                    ],
                    fixes: [
                        'Ensure proper ventilation for cooking',
                        'Add red or orange decorative elements',
                        'Keep electrical appliances organized',
                        'Use warm lighting'
                    ]
                },
                {
                    id: 'southwest',
                    name: 'Southwest (Nairutya)',
                    emoji: '🏔️',
                    element: 'Earth',
                    description: 'Stable area for master bedroom and heavy furniture',
                    recommendations: [
                        'Perfect for master bedroom',
                        'Good for heavy furniture placement',
                        'Use earth tones and solid colors',
                        'Keep this area stable and grounded'
                    ],
                    fixes: [
                        'Place heavy furniture here',
                        'Use earth-toned colors',
                        'Add grounding crystals like black tourmaline',
                        'Ensure solid, stable foundation'
                    ]
                },
                {
                    id: 'center',
                    name: 'Center (Brahmasthan)',
                    emoji: '🌟',
                    element: 'Ether',
                    description: 'Sacred center - keep open and uncluttered',
                    recommendations: [
                        'Keep this area completely open',
                        'Perfect for meditation or prayer',
                        'Use neutral or white colors',
                        'Avoid placing any furniture here'
                    ],
                    fixes: [
                        'Remove all furniture and clutter',
                        'Create an open meditation space',
                        'Use white or neutral colors',
                        'Add a sacred symbol or mandala'
                    ]
                }
            ];

            const completeFix = (roomId) => {
                if (!completedFixes.includes(roomId)) {
                    setCompletedFixes(prev => [...prev, roomId]);
                    addExperience(25);
                    alert(`Vaastu fix completed for ${rooms.find(r => r.id === roomId).name}! +25 EXP`);
                }
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onBack}
                                className="p-2 rounded-full bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 transition-colors"
                            >
                                ←
                            </button>
                            <h1 className="heading-cosmic text-3xl font-bold">Vaastu Guide</h1>
                        </div>
                    </div>

                    {/* Room Grid */}
                    <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
                        {rooms.map((room, index) => (
                            <motion.button
                                key={room.id}
                                initial={{ scale: 0, opacity: 0 }}
                                animate={{ scale: 1, opacity: 1 }}
                                transition={{ delay: index * 0.1 }}
                                onClick={() => setSelectedRoom(room)}
                                className={`cosmic-card p-4 text-center transition-all ${
                                    selectedRoom?.id === room.id ? 'ring-2 ring-purple-400' : ''
                                } ${completedFixes.includes(room.id) ? 'bg-green-500/10' : ''}`}
                            >
                                <div className="text-3xl mb-2">{room.emoji}</div>
                                <h3 className="font-semibold text-purple-300 mb-1">{room.name}</h3>
                                <p className="text-xs text-gray-400 mb-2">{room.element}</p>
                                {completedFixes.includes(room.id) && (
                                    <span className="text-green-400 text-xs">✓ Fixed</span>
                                )}
                            </motion.button>
                        ))}
                    </div>

                    {/* Room Details */}
                    {selectedRoom && (
                        <motion.div
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            className="cosmic-card"
                        >
                            <div className="flex items-center gap-4 mb-4">
                                <div className="text-4xl">{selectedRoom.emoji}</div>
                                <div>
                                    <h2 className="text-xl font-semibold text-purple-300">{selectedRoom.name}</h2>
                                    <p className="text-gray-300">{selectedRoom.description}</p>
                                </div>
                            </div>

                            <div className="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 className="text-lg font-semibold text-green-300 mb-3">Recommendations</h3>
                                    <ul className="space-y-2">
                                        {selectedRoom.recommendations.map((rec, index) => (
                                            <li key={index} className="flex items-start gap-2">
                                                <span className="text-green-400 mt-1">•</span>
                                                <span className="text-gray-300 text-sm">{rec}</span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>

                                <div>
                                    <h3 className="text-lg font-semibold text-blue-300 mb-3">Quick Fixes</h3>
                                    <ul className="space-y-2">
                                        {selectedRoom.fixes.map((fix, index) => (
                                            <li key={index} className="flex items-start gap-2">
                                                <span className="text-blue-400 mt-1">•</span>
                                                <span className="text-gray-300 text-sm">{fix}</span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            </div>

                            {!completedFixes.includes(selectedRoom.id) && (
                                <button
                                    onClick={() => completeFix(selectedRoom.id)}
                                    className="glow-button w-full mt-6"
                                >
                                    ✨ Complete Fix
                                </button>
                            )}
                        </motion.div>
                    )}
                </div>
            );
        };

        // Star Sign Detail Screen
        const StarSignDetailScreen = ({ sign, onBack }) => {
            const [currentSection, setCurrentSection] = useState('overview');
            const [isAudioPlaying, setIsAudioPlaying] = useState(false);

            const signData = {
                Aries: {
                    emoji: '♈',
                    element: 'Fire',
                    quality: 'Cardinal',
                    ruler: 'Mars',
                    dates: 'March 21 - April 19',
                    traits: ['Courageous', 'Energetic', 'Pioneering', 'Independent', 'Enthusiastic'],
                    challenges: ['Impatient', 'Impulsive', 'Aggressive', 'Self-centered'],
                    emotionalPatterns: 'Aries feels emotions intensely and expresses them directly. They are passionate and quick to react, but also quick to forgive.',
                    compatibility: {
                        best: ['Leo', 'Sagittarius', 'Gemini'],
                        good: ['Aquarius', 'Libra'],
                        challenging: ['Cancer', 'Capricorn']
                    },
                    career: 'Natural leaders, entrepreneurs, athletes, firefighters, military personnel',
                    lifePath: 'Aries life path is about learning courage, taking initiative, and leading others. They are here to be pioneers and inspire action.',
                    strengths: ['Leadership', 'Courage', 'Energy', 'Optimism', 'Directness'],
                    weaknesses: ['Impatience', 'Selfishness', 'Aggression', 'Restlessness'],
                    spiritual: 'Aries represents the spark of creation and the warrior spirit. They teach us about courage and taking action.',
                    colors: ['Red', 'Orange', 'White'],
                    crystals: ['Bloodstone', 'Ruby', 'Carnelian'],
                    luckyNumbers: [1, 9, 17],
                    tarotCard: 'The Emperor'
                },
                Taurus: {
                    emoji: '♉',
                    element: 'Earth',
                    quality: 'Fixed',
                    ruler: 'Venus',
                    dates: 'April 20 - May 20',
                    traits: ['Reliable', 'Patient', 'Practical', 'Loyal', 'Determined'],
                    challenges: ['Stubborn', 'Possessive', 'Materialistic', 'Resistant to change'],
                    emotionalPatterns: 'Taurus is deeply emotional but keeps feelings private. They are loyal and need security in relationships.',
                    compatibility: {
                        best: ['Virgo', 'Capricorn', 'Cancer'],
                        good: ['Pisces', 'Scorpio'],
                        challenging: ['Aquarius', 'Leo']
                    },
                    career: 'Bankers, farmers, chefs, artists, real estate agents, gardeners',
                    lifePath: 'Taurus life path is about building stability, appreciating beauty, and creating lasting foundations.',
                    strengths: ['Reliability', 'Patience', 'Practicality', 'Loyalty', 'Determination'],
                    weaknesses: ['Stubbornness', 'Possessiveness', 'Materialism', 'Resistance to change'],
                    spiritual: 'Taurus represents the beauty of the earth and the power of manifestation. They teach us about patience and persistence.',
                    colors: ['Green', 'Pink', 'Brown'],
                    crystals: ['Rose Quartz', 'Emerald', 'Jade'],
                    luckyNumbers: [2, 6, 15],
                    tarotCard: 'The Hierophant'
                },
                Gemini: {
                    emoji: '♊',
                    element: 'Air',
                    quality: 'Mutable',
                    ruler: 'Mercury',
                    dates: 'May 21 - June 20',
                    traits: ['Adaptable', 'Versatile', 'Expressive', 'Quick-witted', 'Sociable'],
                    challenges: ['Indecisive', 'Nervous', 'Inconsistent', 'Superficial'],
                    emotionalPatterns: 'Gemini experiences emotions intellectually. They need mental stimulation and variety in relationships.',
                    compatibility: {
                        best: ['Libra', 'Aquarius', 'Aries'],
                        good: ['Leo', 'Sagittarius'],
                        challenging: ['Pisces', 'Virgo']
                    },
                    career: 'Journalists, teachers, salespeople, writers, translators, communicators',
                    lifePath: 'Gemini life path is about communication, learning, and connecting with others through ideas and information.',
                    strengths: ['Adaptability', 'Communication', 'Intelligence', 'Versatility', 'Sociability'],
                    weaknesses: ['Indecisiveness', 'Nervousness', 'Inconsistency', 'Superficiality'],
                    spiritual: 'Gemini represents the mind and the power of communication. They teach us about learning and sharing knowledge.',
                    colors: ['Yellow', 'Light Blue', 'Orange'],
                    crystals: ['Citrine', 'Tiger\'s Eye', 'Agate'],
                    luckyNumbers: [3, 7, 12],
                    tarotCard: 'The Lovers'
                },
                Cancer: {
                    emoji: '♋',
                    element: 'Water',
                    quality: 'Cardinal',
                    ruler: 'Moon',
                    dates: 'June 21 - July 22',
                    traits: ['Nurturing', 'Protective', 'Intuitive', 'Emotional', 'Loyal'],
                    challenges: ['Moody', 'Overly sensitive', 'Clingy', 'Pessimistic'],
                    emotionalPatterns: 'Cancer is deeply emotional and intuitive. They feel everything intensely and need emotional security.',
                    compatibility: {
                        best: ['Scorpio', 'Pisces', 'Taurus'],
                        good: ['Virgo', 'Capricorn'],
                        challenging: ['Aries', 'Libra']
                    },
                    career: 'Nurses, counselors, chefs, real estate agents, caregivers, teachers',
                    lifePath: 'Cancer life path is about nurturing, protecting, and creating emotional security for themselves and others.',
                    strengths: ['Nurturing', 'Intuition', 'Loyalty', 'Protectiveness', 'Emotional depth'],
                    weaknesses: ['Moodiness', 'Oversensitivity', 'Clinginess', 'Pessimism'],
                    spiritual: 'Cancer represents the moon and the power of intuition. They teach us about emotional wisdom and nurturing.',
                    colors: ['Silver', 'White', 'Pale Blue'],
                    crystals: ['Moonstone', 'Pearl', 'Opal'],
                    luckyNumbers: [2, 7, 11],
                    tarotCard: 'The Chariot'
                },
                Leo: {
                    emoji: '♌',
                    element: 'Fire',
                    quality: 'Fixed',
                    ruler: 'Sun',
                    dates: 'July 23 - August 22',
                    traits: ['Confident', 'Creative', 'Generous', 'Loyal', 'Dramatic'],
                    challenges: ['Arrogant', 'Stubborn', 'Self-centered', 'Attention-seeking'],
                    emotionalPatterns: 'Leo is warm-hearted and generous with emotions. They need appreciation and recognition in relationships.',
                    compatibility: {
                        best: ['Aries', 'Sagittarius', 'Gemini'],
                        good: ['Libra', 'Aquarius'],
                        challenging: ['Taurus', 'Scorpio']
                    },
                    career: 'Actors, leaders, teachers, artists, entrepreneurs, performers',
                    lifePath: 'Leo life path is about leadership, creativity, and inspiring others through their natural charisma and warmth.',
                    strengths: ['Confidence', 'Creativity', 'Generosity', 'Loyalty', 'Leadership'],
                    weaknesses: ['Arrogance', 'Stubbornness', 'Self-centeredness', 'Attention-seeking'],
                    spiritual: 'Leo represents the sun and the power of self-expression. They teach us about confidence and creative leadership.',
                    colors: ['Gold', 'Orange', 'Purple'],
                    crystals: ['Citrine', 'Amber', 'Tiger\'s Eye'],
                    luckyNumbers: [1, 4, 10],
                    tarotCard: 'Strength'
                },
                Virgo: {
                    emoji: '♍',
                    element: 'Earth',
                    quality: 'Mutable',
                    ruler: 'Mercury',
                    dates: 'August 23 - September 22',
                    traits: ['Analytical', 'Practical', 'Reliable', 'Modest', 'Intelligent'],
                    challenges: ['Overcritical', 'Worrisome', 'Perfectionist', 'Shy'],
                    emotionalPatterns: 'Virgo is reserved with emotions but deeply caring. They show love through acts of service and attention to detail.',
                    compatibility: {
                        best: ['Taurus', 'Capricorn', 'Cancer'],
                        good: ['Scorpio', 'Pisces'],
                        challenging: ['Gemini', 'Sagittarius']
                    },
                    career: 'Doctors, accountants, researchers, editors, analysts, service workers',
                    lifePath: 'Virgo life path is about service, improvement, and helping others through practical skills and attention to detail.',
                    strengths: ['Analytical thinking', 'Practicality', 'Reliability', 'Intelligence', 'Service'],
                    weaknesses: ['Overcritical nature', 'Worrying', 'Perfectionism', 'Shyness'],
                    spiritual: 'Virgo represents the harvest and the power of service. They teach us about improvement and helping others.',
                    colors: ['Green', 'Brown', 'Navy Blue'],
                    crystals: ['Jade', 'Moss Agate', 'Peridot'],
                    luckyNumbers: [5, 14, 15],
                    tarotCard: 'The Hermit'
                },
                Libra: {
                    emoji: '♎',
                    element: 'Air',
                    quality: 'Cardinal',
                    ruler: 'Venus',
                    dates: 'September 23 - October 22',
                    traits: ['Diplomatic', 'Gracious', 'Fair-minded', 'Social', 'Peaceful'],
                    challenges: ['Indecisive', 'Avoids confrontations', 'Self-pitying', 'Easily influenced'],
                    emotionalPatterns: 'Libra seeks harmony in emotions and relationships. They are romantic and need balance in their emotional life.',
                    compatibility: {
                        best: ['Gemini', 'Aquarius', 'Leo'],
                        good: ['Sagittarius', 'Aries'],
                        challenging: ['Cancer', 'Capricorn']
                    },
                    career: 'Lawyers, diplomats, mediators, artists, designers, counselors',
                    lifePath: 'Libra life path is about creating balance, harmony, and justice in the world through relationships and partnerships.',
                    strengths: ['Diplomacy', 'Fairness', 'Social skills', 'Peacemaking', 'Grace'],
                    weaknesses: ['Indecisiveness', 'Conflict avoidance', 'Self-pity', 'Easily influenced'],
                    spiritual: 'Libra represents balance and the power of partnership. They teach us about harmony and justice.',
                    colors: ['Pink', 'Light Blue', 'Lavender'],
                    crystals: ['Rose Quartz', 'Opal', 'Lapis Lazuli'],
                    luckyNumbers: [6, 15, 24],
                    tarotCard: 'Justice'
                },
                Scorpio: {
                    emoji: '♏',
                    element: 'Water',
                    quality: 'Fixed',
                    ruler: 'Pluto',
                    dates: 'October 23 - November 21',
                    traits: ['Passionate', 'Determined', 'Magnetic', 'Intuitive', 'Mysterious'],
                    challenges: ['Jealous', 'Secretive', 'Stubborn', 'Vengeful'],
                    emotionalPatterns: 'Scorpio experiences emotions with great intensity and depth. They are passionate and need deep, meaningful connections.',
                    compatibility: {
                        best: ['Cancer', 'Pisces', 'Taurus'],
                        good: ['Virgo', 'Capricorn'],
                        challenging: ['Leo', 'Aquarius']
                    },
                    career: 'Detectives, psychologists, researchers, surgeons, investigators, therapists',
                    lifePath: 'Scorpio life path is about transformation, deep understanding, and uncovering hidden truths.',
                    strengths: ['Passion', 'Determination', 'Intuition', 'Loyalty', 'Depth'],
                    weaknesses: ['Jealousy', 'Secretiveness', 'Stubbornness', 'Vengefulness'],
                    spiritual: 'Scorpio represents transformation and the power of the unconscious. They teach us about depth and regeneration.',
                    colors: ['Deep Red', 'Black', 'Burgundy'],
                    crystals: ['Obsidian', 'Garnet', 'Black Tourmaline'],
                    luckyNumbers: [8, 11, 22],
                    tarotCard: 'Death'
                },
                Sagittarius: {
                    emoji: '♐',
                    element: 'Fire',
                    quality: 'Mutable',
                    ruler: 'Jupiter',
                    dates: 'November 22 - December 21',
                    traits: ['Optimistic', 'Adventurous', 'Honest', 'Philosophical', 'Independent'],
                    challenges: ['Impatient', 'Blunt', 'Restless', 'Overconfident'],
                    emotionalPatterns: 'Sagittarius is optimistic and enthusiastic about emotions. They need freedom and adventure in relationships.',
                    compatibility: {
                        best: ['Aries', 'Leo', 'Libra'],
                        good: ['Aquarius', 'Gemini'],
                        challenging: ['Virgo', 'Pisces']
                    },
                    career: 'Teachers, travelers, philosophers, athletes, writers, explorers',
                    lifePath: 'Sagittarius life path is about exploration, learning, and sharing wisdom through adventure and experience.',
                    strengths: ['Optimism', 'Adventure', 'Honesty', 'Philosophy', 'Independence'],
                    weaknesses: ['Impatience', 'Bluntness', 'Restlessness', 'Overconfidence'],
                    spiritual: 'Sagittarius represents the quest for truth and the power of expansion. They teach us about optimism and wisdom.',
                    colors: ['Purple', 'Blue', 'Red'],
                    crystals: ['Amethyst', 'Turquoise', 'Lapis Lazuli'],
                    luckyNumbers: [3, 7, 12],
                    tarotCard: 'Temperance'
                },
                Capricorn: {
                    emoji: '♑',
                    element: 'Earth',
                    quality: 'Cardinal',
                    ruler: 'Saturn',
                    dates: 'December 22 - January 19',
                    traits: ['Responsible', 'Disciplined', 'Ambitious', 'Patient', 'Practical'],
                    challenges: ['Pessimistic', 'Rigid', 'Materialistic', 'Cold'],
                    emotionalPatterns: 'Capricorn is reserved with emotions but deeply loyal. They show love through commitment and providing security.',
                    compatibility: {
                        best: ['Taurus', 'Virgo', 'Scorpio'],
                        good: ['Pisces', 'Cancer'],
                        challenging: ['Aries', 'Libra']
                    },
                    career: 'Managers, executives, accountants, engineers, architects, politicians',
                    lifePath: 'Capricorn life path is about building lasting structures, achieving goals, and creating security through hard work.',
                    strengths: ['Responsibility', 'Discipline', 'Ambition', 'Patience', 'Practicality'],
                    weaknesses: ['Pessimism', 'Rigidity', 'Materialism', 'Coldness'],
                    spiritual: 'Capricorn represents the mountain and the power of achievement. They teach us about discipline and building foundations.',
                    colors: ['Brown', 'Black', 'Dark Green'],
                    crystals: ['Onyx', 'Jet', 'Black Tourmaline'],
                    luckyNumbers: [4, 8, 13],
                    tarotCard: 'The Devil'
                },
                Aquarius: {
                    emoji: '♒',
                    element: 'Air',
                    quality: 'Fixed',
                    ruler: 'Uranus',
                    dates: 'January 20 - February 18',
                    traits: ['Progressive', 'Original', 'Independent', 'Humanitarian', 'Intellectual'],
                    challenges: ['Unpredictable', 'Aloof', 'Stubborn', 'Detached'],
                    emotionalPatterns: 'Aquarius is intellectual about emotions and values friendship. They need mental connection and freedom in relationships.',
                    compatibility: {
                        best: ['Gemini', 'Libra', 'Sagittarius'],
                        good: ['Aries', 'Leo'],
                        challenging: ['Taurus', 'Scorpio']
                    },
                    career: 'Scientists, inventors, activists, engineers, researchers, social workers',
                    lifePath: 'Aquarius life path is about innovation, humanitarian service, and bringing new ideas to the world.',
                    strengths: ['Innovation', 'Independence', 'Humanitarianism', 'Intelligence', 'Originality'],
                    weaknesses: ['Unpredictability', 'Aloofness', 'Stubbornness', 'Detachment'],
                    spiritual: 'Aquarius represents the water bearer and the power of innovation. They teach us about progress and humanitarian service.',
                    colors: ['Electric Blue', 'Silver', 'Purple'],
                    crystals: ['Amethyst', 'Aquamarine', 'Clear Quartz'],
                    luckyNumbers: [4, 7, 11],
                    tarotCard: 'The Star'
                },
                Pisces: {
                    emoji: '♓',
                    element: 'Water',
                    quality: 'Mutable',
                    ruler: 'Neptune',
                    dates: 'February 19 - March 20',
                    traits: ['Compassionate', 'Artistic', 'Intuitive', 'Gentle', 'Musical'],
                    challenges: ['Escapist', 'Overly trusting', 'Pessimistic', 'Indecisive'],
                    emotionalPatterns: 'Pisces is deeply emotional and empathic. They feel others\' emotions and need spiritual connection in relationships.',
                    compatibility: {
                        best: ['Cancer', 'Scorpio', 'Taurus'],
                        good: ['Capricorn', 'Virgo'],
                        challenging: ['Gemini', 'Sagittarius']
                    },
                    career: 'Artists, musicians, healers, counselors, spiritual workers, poets',
                    lifePath: 'Pisces life path is about compassion, spiritual service, and connecting with the divine through creativity and empathy.',
                    strengths: ['Compassion', 'Creativity', 'Intuition', 'Empathy', 'Spirituality'],
                    weaknesses: ['Escapism', 'Over-trusting', 'Pessimism', 'Indecisiveness'],
                    spiritual: 'Pisces represents the ocean and the power of spiritual connection. They teach us about compassion and divine love.',
                    colors: ['Sea Green', 'Purple', 'Silver'],
                    crystals: ['Aquamarine', 'Amethyst', 'Moonstone'],
                    luckyNumbers: [3, 7, 12],
                    tarotCard: 'The Moon'
                }
            };

            const data = signData[sign];

            // Star animation effect
            useEffect(() => {
                const createStars = () => {
                    const stars = [];
                    for (let i = 0; i < 20; i++) {
                        const star = document.createElement('div');
                        star.className = 'absolute w-1 h-1 bg-white rounded-full opacity-70';
                        star.style.left = Math.random() * 100 + '%';
                        star.style.top = Math.random() * 100 + '%';
                        star.style.animation = `twinkle ${2 + Math.random() * 3}s infinite`;
                        star.style.animationDelay = Math.random() * 2 + 's';
                        document.getElementById('star-container').appendChild(star);
                        stars.push(star);
                    }
                    return stars;
                };

                const stars = createStars();
                return () => stars.forEach(star => star.remove());
            }, []);

            return (
                <div className="min-h-screen relative overflow-hidden">
                    {/* Animated Background */}
                    <div id="star-container" className="absolute inset-0 pointer-events-none" />
                    
                    {/* Gradient Background */}
                    <div className="absolute inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900" />
                    
                    {/* Content */}
                    <div className="relative z-10 p-4">
                        {/* Header */}
                        <motion.div
                            initial={{ y: -50, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            className="flex items-center justify-between mb-6"
                        >
                            <button
                                onClick={onBack}
                                className="p-3 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all"
                            >
                                ←
                            </button>
                            <h1 className="text-2xl font-bold text-white">Star Sign Details</h1>
                            <button
                                onClick={() => setIsAudioPlaying(!isAudioPlaying)}
                                className="p-3 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all"
                            >
                                {isAudioPlaying ? '🔊' : '🔇'}
                            </button>
                        </motion.div>

                        {/* Sign Header */}
                        <motion.div
                            initial={{ scale: 0.8, opacity: 0 }}
                            animate={{ scale: 1, opacity: 1 }}
                            transition={{ delay: 0.2 }}
                            className="text-center mb-8"
                        >
                            <div className="text-8xl mb-4 animate-pulse">{data.emoji}</div>
                            <h2 className="text-4xl font-bold text-white mb-2">{sign}</h2>
                            <p className="text-lg text-blue-200 mb-4">{data.dates}</p>
                            <div className="flex justify-center gap-4 text-sm">
                                <span className="px-3 py-1 bg-red-500/20 text-red-300 rounded-full">{data.element}</span>
                                <span className="px-3 py-1 bg-blue-500/20 text-blue-300 rounded-full">{data.quality}</span>
                                <span className="px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full">{data.ruler}</span>
                            </div>
                        </motion.div>

                        {/* Navigation Tabs */}
                        <motion.div
                            initial={{ y: 20, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            transition={{ delay: 0.4 }}
                            className="flex gap-2 mb-6 overflow-x-auto"
                        >
                            {['overview', 'traits', 'compatibility', 'career', 'lifePath'].map((section) => (
                                <button
                                    key={section}
                                    onClick={() => setCurrentSection(section)}
                                    className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
                                        currentSection === section
                                            ? 'bg-white/20 text-white'
                                            : 'bg-white/10 text-gray-300 hover:bg-white/15'
                                    }`}
                                >
                                    {section.charAt(0).toUpperCase() + section.slice(1)}
                                </button>
                            ))}
                        </motion.div>

                        {/* Content Sections */}
                        <motion.div
                            key={currentSection}
                            initial={{ x: 20, opacity: 0 }}
                            animate={{ x: 0, opacity: 1 }}
                            className="space-y-6"
                        >
                            {currentSection === 'overview' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">About {sign}</h3>
                                        <p className="text-gray-200 leading-relaxed">{data.emotionalPatterns}</p>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-4">
                                            <h4 className="text-lg font-semibold text-green-300 mb-3">Strengths</h4>
                                            <div className="space-y-2">
                                                {data.strengths.map((strength, index) => (
                                                    <div key={index} className="flex items-center gap-2">
                                                        <span className="text-green-400">•</span>
                                                        <span className="text-gray-200 text-sm">{strength}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                        
                                        <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-4">
                                            <h4 className="text-lg font-semibold text-red-300 mb-3">Challenges</h4>
                                            <div className="space-y-2">
                                                {data.challenges.map((challenge, index) => (
                                                    <div key={index} className="flex items-center gap-2">
                                                        <span className="text-red-400">•</span>
                                                        <span className="text-gray-200 text-sm">{challenge}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'traits' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Personality Traits</h3>
                                        <div className="grid grid-cols-2 gap-3">
                                            {data.traits.map((trait, index) => (
                                                <div key={index} className="bg-white/5 rounded-lg p-3 text-center">
                                                    <span className="text-blue-200 font-medium">{trait}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Spiritual Essence</h3>
                                        <p className="text-gray-200 leading-relaxed">{data.spiritual}</p>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'compatibility' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Love Compatibility</h3>
                                        <div className="space-y-4">
                                            <div>
                                                <h4 className="text-lg font-semibold text-green-300 mb-2">Best Matches</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.compatibility.best.map((match, index) => (
                                                        <span key={index} className="px-3 py-1 bg-green-500/20 text-green-300 rounded-full text-sm">
                                                            {match}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <h4 className="text-lg font-semibold text-yellow-300 mb-2">Good Matches</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.compatibility.good.map((match, index) => (
                                                        <span key={index} className="px-3 py-1 bg-yellow-500/20 text-yellow-300 rounded-full text-sm">
                                                            {match}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <h4 className="text-lg font-semibold text-red-300 mb-2">Challenging</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.compatibility.challenging.map((match, index) => (
                                                        <span key={index} className="px-3 py-1 bg-red-500/20 text-red-300 rounded-full text-sm">
                                                            {match}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'career' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Career Paths</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.career}</p>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-purple-300 mb-2">Colors</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.colors.map((color, index) => (
                                                        <span key={index} className="px-2 py-1 bg-purple-500/20 text-purple-300 rounded text-xs">
                                                            {color}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-blue-300 mb-2">Crystals</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.crystals.map((crystal, index) => (
                                                        <span key={index} className="px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs">
                                                            {crystal}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'lifePath' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Life Path & Numerology</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.lifePath}</p>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-yellow-300 mb-2">Lucky Numbers</h4>
                                                <div className="flex gap-2">
                                                    {data.luckyNumbers.map((number, index) => (
                                                        <span key={index} className="w-8 h-8 bg-yellow-500/20 text-yellow-300 rounded-full flex items-center justify-center text-sm font-bold">
                                                            {number}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-purple-300 mb-2">Tarot Card</h4>
                                                <span className="text-purple-300 font-medium">{data.tarotCard}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </motion.div>
                    </div>
                </div>
            );
        };

        // Moon Sign Detail Screen
        const MoonSignDetailScreen = ({ sign, onBack }) => {
            const [currentSection, setCurrentSection] = useState('overview');
            const [isAudioPlaying, setIsAudioPlaying] = useState(false);

            const moonSignData = {
                Aries: {
                    emoji: '🌙',
                    element: 'Fire',
                    emotionalNature: 'Passionate and impulsive',
                    innerSelf: 'You have a warrior spirit within. Your emotions are intense and immediate, like a flame that burns bright and fast.',
                    emotionalPatterns: 'Your emotions are direct and fiery. You feel things deeply and express them immediately, often with great passion and intensity.',
                    needs: ['Independence', 'Action', 'Excitement', 'Direct communication', 'Freedom'],
                    challenges: ['Impatience with emotions', 'Anger outbursts', 'Impulsive reactions', 'Difficulty with patience'],
                    relationships: 'You need partners who can handle your intensity and give you space to be independent. Direct communication is essential.',
                    career: 'You thrive in dynamic, action-oriented careers where you can lead and take initiative.',
                    spiritual: 'Your moon sign represents the inner warrior and the need for spiritual courage and independence.',
                    healing: 'Meditation, physical exercise, and creative expression help balance your emotional fire.',
                    crystals: ['Carnelian', 'Red Jasper', 'Bloodstone'],
                    colors: ['Red', 'Orange', 'Bright Yellow'],
                    luckyNumbers: [1, 9, 17],
                    tarotCard: 'The Emperor'
                },
                Taurus: {
                    emoji: '🌙',
                    element: 'Earth',
                    emotionalNature: 'Stable and sensual',
                    innerSelf: 'You have a deep connection to the earth and material comforts. Your emotions are steady and enduring, like a mountain.',
                    emotionalPatterns: 'Your emotions are grounded and practical. You need security and stability to feel emotionally balanced.',
                    needs: ['Security', 'Comfort', 'Loyalty', 'Physical touch', 'Beauty'],
                    challenges: ['Stubbornness in emotions', 'Resistance to change', 'Material attachment', 'Possessiveness'],
                    relationships: 'You need partners who provide security and loyalty. Physical affection and stability are crucial.',
                    career: 'You excel in careers that provide security and allow you to build something lasting.',
                    spiritual: 'Your moon sign represents the need for spiritual grounding and connection to the physical world.',
                    healing: 'Nature walks, gardening, and creating beautiful spaces help balance your emotions.',
                    crystals: ['Rose Quartz', 'Jade', 'Green Aventurine'],
                    colors: ['Green', 'Pink', 'Brown'],
                    luckyNumbers: [2, 6, 15],
                    tarotCard: 'The Hierophant'
                },
                Gemini: {
                    emoji: '🌙',
                    element: 'Air',
                    emotionalNature: 'Curious and changeable',
                    innerSelf: 'You have a restless mind and need mental stimulation. Your emotions are intellectual and varied, like the wind.',
                    emotionalPatterns: 'Your emotions are connected to your thoughts. You need variety and mental engagement to feel emotionally satisfied.',
                    needs: ['Mental stimulation', 'Variety', 'Communication', 'Learning', 'Social interaction'],
                    challenges: ['Indecisiveness', 'Scattered emotions', 'Overthinking', 'Restlessness'],
                    relationships: 'You need partners who can engage you mentally and provide variety in the relationship.',
                    career: 'You thrive in careers that involve communication, learning, and variety.',
                    spiritual: 'Your moon sign represents the need for spiritual learning and mental exploration.',
                    healing: 'Reading, writing, and engaging conversations help balance your emotions.',
                    crystals: ['Citrine', 'Tiger\'s Eye', 'Clear Quartz'],
                    colors: ['Yellow', 'Light Blue', 'Orange'],
                    luckyNumbers: [3, 7, 12],
                    tarotCard: 'The Lovers'
                },
                Cancer: {
                    emoji: '🌙',
                    element: 'Water',
                    emotionalNature: 'Nurturing and sensitive',
                    innerSelf: 'You are deeply connected to your emotions and intuition. Your inner world is rich and complex, like the ocean.',
                    emotionalPatterns: 'Your emotions are deep and intuitive. You feel everything intensely and need emotional security.',
                    needs: ['Emotional security', 'Nurturing', 'Home', 'Family', 'Intimacy'],
                    challenges: ['Oversensitivity', 'Mood swings', 'Clinginess', 'Emotional dependency'],
                    relationships: 'You need partners who provide emotional security and understand your sensitivity.',
                    career: 'You excel in caring professions and careers that allow you to nurture others.',
                    spiritual: 'Your moon sign represents the need for spiritual nurturing and emotional wisdom.',
                    healing: 'Time at home, family connections, and emotional expression help balance your emotions.',
                    crystals: ['Moonstone', 'Pearl', 'Opal'],
                    colors: ['Silver', 'White', 'Pale Blue'],
                    luckyNumbers: [2, 7, 11],
                    tarotCard: 'The Chariot'
                },
                Leo: {
                    emoji: '🌙',
                    element: 'Fire',
                    emotionalNature: 'Dramatic and generous',
                    innerSelf: 'You have a warm, generous heart and need to be appreciated. Your emotions are dramatic and expressive.',
                    emotionalPatterns: 'Your emotions are warm and generous. You need recognition and appreciation to feel emotionally fulfilled.',
                    needs: ['Recognition', 'Appreciation', 'Creativity', 'Loyalty', 'Generosity'],
                    challenges: ['Need for attention', 'Pride', 'Dramatic reactions', 'Self-centeredness'],
                    relationships: 'You need partners who appreciate and admire you, and who are loyal and generous.',
                    career: 'You thrive in careers that allow you to be creative and receive recognition.',
                    spiritual: 'Your moon sign represents the need for spiritual self-expression and creative leadership.',
                    healing: 'Creative expression, performing, and receiving appreciation help balance your emotions.',
                    crystals: ['Citrine', 'Amber', 'Tiger\'s Eye'],
                    colors: ['Gold', 'Orange', 'Purple'],
                    luckyNumbers: [1, 4, 10],
                    tarotCard: 'Strength'
                },
                Virgo: {
                    emoji: '🌙',
                    element: 'Earth',
                    emotionalNature: 'Practical and caring',
                    innerSelf: 'You have a practical approach to emotions and show love through service. Your inner world is organized and thoughtful.',
                    emotionalPatterns: 'Your emotions are practical and service-oriented. You show love through acts of care and attention to detail.',
                    needs: ['Order', 'Service', 'Improvement', 'Practical support', 'Recognition of efforts'],
                    challenges: ['Overcritical nature', 'Worrying', 'Perfectionism', 'Self-sacrifice'],
                    relationships: 'You need partners who appreciate your practical care and attention to detail.',
                    career: 'You excel in service-oriented careers and roles that require attention to detail.',
                    spiritual: 'Your moon sign represents the need for spiritual service and practical improvement.',
                    healing: 'Organizing, helping others, and creating order help balance your emotions.',
                    crystals: ['Jade', 'Moss Agate', 'Peridot'],
                    colors: ['Green', 'Brown', 'Navy Blue'],
                    luckyNumbers: [5, 14, 15],
                    tarotCard: 'The Hermit'
                },
                Libra: {
                    emoji: '🌙',
                    element: 'Air',
                    emotionalNature: 'Harmonious and diplomatic',
                    innerSelf: 'You seek balance and harmony in your emotional world. Your inner self is gracious and relationship-oriented.',
                    emotionalPatterns: 'Your emotions are balanced and relationship-focused. You need harmony and partnership to feel emotionally complete.',
                    needs: ['Harmony', 'Partnership', 'Beauty', 'Fairness', 'Social connection'],
                    challenges: ['Indecisiveness', 'Conflict avoidance', 'People-pleasing', 'Dependency on others'],
                    relationships: 'You need partners who create harmony and appreciate beauty and fairness.',
                    career: 'You thrive in careers that involve relationships, beauty, and creating harmony.',
                    spiritual: 'Your moon sign represents the need for spiritual balance and harmonious relationships.',
                    healing: 'Creating beauty, mediation, and balanced relationships help balance your emotions.',
                    crystals: ['Rose Quartz', 'Opal', 'Lapis Lazuli'],
                    colors: ['Pink', 'Light Blue', 'Lavender'],
                    luckyNumbers: [6, 15, 24],
                    tarotCard: 'Justice'
                },
                Scorpio: {
                    emoji: '🌙',
                    element: 'Water',
                    emotionalNature: 'Intense and transformative',
                    innerSelf: 'You have deep, intense emotions and powerful intuition. Your inner world is mysterious and transformative.',
                    emotionalPatterns: 'Your emotions are deep, intense, and transformative. You experience emotions with great depth and power.',
                    needs: ['Intimacy', 'Transformation', 'Truth', 'Loyalty', 'Emotional depth'],
                    challenges: ['Jealousy', 'Possessiveness', 'Emotional intensity', 'Secretiveness'],
                    relationships: 'You need partners who can handle emotional intensity and provide deep intimacy.',
                    career: 'You excel in careers that involve transformation, research, or deep emotional work.',
                    spiritual: 'Your moon sign represents the need for spiritual transformation and emotional power.',
                    healing: 'Deep emotional work, transformation, and intimate connections help balance your emotions.',
                    crystals: ['Obsidian', 'Garnet', 'Black Tourmaline'],
                    colors: ['Deep Red', 'Black', 'Burgundy'],
                    luckyNumbers: [8, 11, 22],
                    tarotCard: 'Death'
                },
                Sagittarius: {
                    emoji: '🌙',
                    element: 'Fire',
                    emotionalNature: 'Optimistic and adventurous',
                    innerSelf: 'You have an optimistic and adventurous spirit. Your emotions are enthusiastic and freedom-loving.',
                    emotionalPatterns: 'Your emotions are optimistic and expansive. You need freedom and adventure to feel emotionally fulfilled.',
                    needs: ['Freedom', 'Adventure', 'Learning', 'Optimism', 'Expansion'],
                    challenges: ['Restlessness', 'Overconfidence', 'Bluntness', 'Commitment issues'],
                    relationships: 'You need partners who give you freedom and share your love for adventure.',
                    career: 'You thrive in careers that involve travel, learning, and expansion.',
                    spiritual: 'Your moon sign represents the need for spiritual expansion and optimistic growth.',
                    healing: 'Travel, learning, and philosophical exploration help balance your emotions.',
                    crystals: ['Amethyst', 'Turquoise', 'Lapis Lazuli'],
                    colors: ['Purple', 'Blue', 'Red'],
                    luckyNumbers: [3, 7, 12],
                    tarotCard: 'Temperance'
                },
                Capricorn: {
                    emoji: '🌙',
                    element: 'Earth',
                    emotionalNature: 'Reserved and responsible',
                    innerSelf: 'You have a practical and responsible approach to emotions. Your inner world is structured and goal-oriented.',
                    emotionalPatterns: 'Your emotions are practical and controlled. You show love through commitment and providing security.',
                    needs: ['Security', 'Achievement', 'Respect', 'Structure', 'Long-term commitment'],
                    challenges: ['Emotional reserve', 'Workaholism', 'Pessimism', 'Difficulty expressing emotions'],
                    relationships: 'You need partners who provide security and appreciate your commitment and responsibility.',
                    career: 'You excel in careers that provide security and allow you to build lasting structures.',
                    spiritual: 'Your moon sign represents the need for spiritual achievement and practical wisdom.',
                    healing: 'Building security, achieving goals, and creating structure help balance your emotions.',
                    crystals: ['Onyx', 'Jet', 'Black Tourmaline'],
                    colors: ['Brown', 'Black', 'Dark Green'],
                    luckyNumbers: [4, 8, 13],
                    tarotCard: 'The Devil'
                },
                Aquarius: {
                    emoji: '🌙',
                    element: 'Air',
                    emotionalNature: 'Independent and humanitarian',
                    innerSelf: 'You have an independent and humanitarian spirit. Your emotions are intellectual and focused on the greater good.',
                    emotionalPatterns: 'Your emotions are intellectual and humanitarian. You need independence and social causes to feel emotionally fulfilled.',
                    needs: ['Independence', 'Innovation', 'Humanitarian causes', 'Intellectual stimulation', 'Freedom'],
                    challenges: ['Emotional detachment', 'Rebelliousness', 'Aloofness', 'Difficulty with intimacy'],
                    relationships: 'You need partners who respect your independence and share your humanitarian values.',
                    career: 'You thrive in careers that involve innovation, social causes, and intellectual work.',
                    spiritual: 'Your moon sign represents the need for spiritual independence and humanitarian service.',
                    healing: 'Social activism, innovation, and intellectual pursuits help balance your emotions.',
                    crystals: ['Amethyst', 'Aquamarine', 'Clear Quartz'],
                    colors: ['Electric Blue', 'Silver', 'Purple'],
                    luckyNumbers: [4, 7, 11],
                    tarotCard: 'The Star'
                },
                Pisces: {
                    emoji: '🌙',
                    element: 'Water',
                    emotionalNature: 'Compassionate and mystical',
                    innerSelf: 'You have a compassionate and mystical nature. Your emotions are deeply spiritual and empathic.',
                    emotionalPatterns: 'Your emotions are spiritual and empathic. You feel others\' emotions and need spiritual connection.',
                    needs: ['Spiritual connection', 'Compassion', 'Creativity', 'Dreams', 'Transcendence'],
                    challenges: ['Escapism', 'Overwhelm', 'Boundary issues', 'Emotional confusion'],
                    relationships: 'You need partners who provide spiritual connection and understand your empathic nature.',
                    career: 'You excel in spiritual, artistic, and healing professions.',
                    spiritual: 'Your moon sign represents the need for spiritual transcendence and divine connection.',
                    healing: 'Spiritual practices, creative expression, and compassionate service help balance your emotions.',
                    crystals: ['Aquamarine', 'Amethyst', 'Moonstone'],
                    colors: ['Sea Green', 'Purple', 'Silver'],
                    luckyNumbers: [3, 7, 12],
                    tarotCard: 'The Moon'
                }
            };

            const data = moonSignData[sign];

            // Moon phase animation effect
            useEffect(() => {
                const createMoonPhases = () => {
                    const phases = [];
                    for (let i = 0; i < 8; i++) {
                        const phase = document.createElement('div');
                        phase.className = 'absolute w-2 h-2 bg-white/60 rounded-full';
                        phase.style.left = (10 + i * 10) + '%';
                        phase.style.top = (20 + Math.sin(i) * 10) + '%';
                        phase.style.animation = `twinkle ${3 + Math.random() * 2}s infinite`;
                        phase.style.animationDelay = Math.random() * 2 + 's';
                        document.getElementById('moon-container').appendChild(phase);
                        phases.push(phase);
                    }
                    return phases;
                };

                const phases = createMoonPhases();
                return () => phases.forEach(phase => phase.remove());
            }, []);

            return (
                <div className="min-h-screen relative overflow-hidden">
                    {/* Animated Background */}
                    <div id="moon-container" className="absolute inset-0 pointer-events-none" />
                    
                    {/* Gradient Background */}
                    <div className="absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-blue-900" />
                    
                    {/* Content */}
                    <div className="relative z-10 p-4">
                        {/* Header */}
                        <motion.div
                            initial={{ y: -50, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            className="flex items-center justify-between mb-6"
                        >
                            <button
                                onClick={onBack}
                                className="p-3 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all"
                            >
                                ←
                            </button>
                            <h1 className="text-2xl font-bold text-white">Moon Sign Details</h1>
                            <button
                                onClick={() => setIsAudioPlaying(!isAudioPlaying)}
                                className="p-3 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all"
                            >
                                {isAudioPlaying ? '🔊' : '🔇'}
                            </button>
                        </motion.div>

                        {/* Sign Header */}
                        <motion.div
                            initial={{ scale: 0.8, opacity: 0 }}
                            animate={{ scale: 1, opacity: 1 }}
                            transition={{ delay: 0.2 }}
                            className="text-center mb-8"
                        >
                            <div className="text-8xl mb-4 animate-pulse">{data.emoji}</div>
                            <h2 className="text-4xl font-bold text-white mb-2">Moon in {sign}</h2>
                            <p className="text-lg text-blue-200 mb-4">{data.emotionalNature}</p>
                            <div className="flex justify-center gap-4 text-sm">
                                <span className="px-3 py-1 bg-blue-500/20 text-blue-300 rounded-full">{data.element}</span>
                                <span className="px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full">Inner Self</span>
                                <span className="px-3 py-1 bg-green-500/20 text-green-300 rounded-full">Emotional</span>
                            </div>
                        </motion.div>

                        {/* Navigation Tabs */}
                        <motion.div
                            initial={{ y: 20, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            transition={{ delay: 0.4 }}
                            className="flex gap-2 mb-6 overflow-x-auto"
                        >
                            {['overview', 'innerSelf', 'relationships', 'healing', 'spiritual'].map((section) => (
                                <button
                                    key={section}
                                    onClick={() => setCurrentSection(section)}
                                    className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
                                        currentSection === section
                                            ? 'bg-white/20 text-white'
                                            : 'bg-white/10 text-gray-300 hover:bg-white/15'
                                    }`}
                                >
                                    {section.charAt(0).toUpperCase() + section.slice(1)}
                                </button>
                            ))}
                        </motion.div>

                        {/* Content Sections */}
                        <motion.div
                            key={currentSection}
                            initial={{ x: 20, opacity: 0 }}
                            animate={{ x: 0, opacity: 1 }}
                            className="space-y-6"
                        >
                            {currentSection === 'overview' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Emotional Nature</h3>
                                        <p className="text-gray-200 leading-relaxed">{data.emotionalPatterns}</p>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-4">
                                            <h4 className="text-lg font-semibold text-green-300 mb-3">Emotional Needs</h4>
                                            <div className="space-y-2">
                                                {data.needs.map((need, index) => (
                                                    <div key={index} className="flex items-center gap-2">
                                                        <span className="text-green-400">•</span>
                                                        <span className="text-gray-200 text-sm">{need}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                        
                                        <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-4">
                                            <h4 className="text-lg font-semibold text-red-300 mb-3">Emotional Challenges</h4>
                                            <div className="space-y-2">
                                                {data.challenges.map((challenge, index) => (
                                                    <div key={index} className="flex items-center gap-2">
                                                        <span className="text-red-400">•</span>
                                                        <span className="text-gray-200 text-sm">{challenge}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'innerSelf' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Your Inner Self</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.innerSelf}</p>
                                        <div className="bg-white/5 rounded-lg p-4">
                                            <h4 className="text-lg font-semibold text-purple-300 mb-2">Career Tendencies</h4>
                                            <p className="text-gray-200">{data.career}</p>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'relationships' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Relationship Dynamics</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.relationships}</p>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-pink-300 mb-2">Crystals</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.crystals.map((crystal, index) => (
                                                        <span key={index} className="px-2 py-1 bg-pink-500/20 text-pink-300 rounded text-xs">
                                                            {crystal}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-blue-300 mb-2">Colors</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.colors.map((color, index) => (
                                                        <span key={index} className="px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs">
                                                            {color}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'healing' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Emotional Healing</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.healing}</p>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-yellow-300 mb-2">Lucky Numbers</h4>
                                                <div className="flex gap-2">
                                                    {data.luckyNumbers.map((number, index) => (
                                                        <span key={index} className="w-8 h-8 bg-yellow-500/20 text-yellow-300 rounded-full flex items-center justify-center text-sm font-bold">
                                                            {number}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-purple-300 mb-2">Tarot Card</h4>
                                                <span className="text-purple-300 font-medium">{data.tarotCard}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'spiritual' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Spiritual Essence</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.spiritual}</p>
                                        <div className="bg-white/5 rounded-lg p-4">
                                            <h4 className="text-lg font-semibold text-indigo-300 mb-2">Spiritual Path</h4>
                                            <p className="text-gray-200">Your moon sign guides your spiritual journey and emotional wisdom. Embrace your intuitive nature and emotional depth as spiritual gifts.</p>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </motion.div>
                    </div>
                </div>
            );
        };

        // Life Path Detail Screen
        const LifePathDetailScreen = ({ number, onBack }) => {
            const [currentSection, setCurrentSection] = useState('overview');
            const [isAudioPlaying, setIsAudioPlaying] = useState(false);

            const lifePathData = {
                1: {
                    emoji: '🔥',
                    element: 'Fire',
                    quality: 'Leadership',
                    description: 'The Pioneer - Natural leaders with strong individuality and determination',
                    coreEssence: 'You are a born leader with the power to inspire and motivate others. Your life path is about learning to lead with courage and independence.',
                    lifePurpose: 'To lead, inspire, and create new paths for others through your natural charisma and determination.',
                    strengths: ['Leadership', 'Independence', 'Innovation', 'Courage', 'Determination'],
                    challenges: ['Impatience', 'Dominance', 'Self-centeredness', 'Stubbornness'],
                    career: 'Entrepreneurs, CEOs, Inventors, Athletes, Military leaders, Politicians',
                    relationships: 'You need partners who respect your independence and leadership qualities. Direct communication and mutual respect are essential.',
                    spiritual: 'Your life path represents the spark of creation and the warrior spirit. You teach others about courage and taking action.',
                    colors: ['Red', 'Orange', 'Gold'],
                    crystals: ['Ruby', 'Carnelian', 'Tiger\'s Eye'],
                    luckyNumbers: [1, 9, 17],
                    tarotCard: 'The Emperor'
                },
                2: {
                    emoji: '🌊',
                    element: 'Water',
                    quality: 'Diplomacy',
                    description: 'The Mediator - Diplomatic peacemakers with strong intuition and sensitivity',
                    coreEssence: 'You are a natural peacemaker with strong intuitive abilities. Your life path is about bringing harmony and balance to the world.',
                    lifePurpose: 'To bring harmony, balance, and cooperation to the world through your diplomatic nature and intuitive wisdom.',
                    strengths: ['Diplomacy', 'Intuition', 'Cooperation', 'Patience', 'Sensitivity'],
                    challenges: ['Oversensitivity', 'Indecisiveness', 'Self-doubt', 'Emotional dependency'],
                    career: 'Counselors, Mediators, Teachers, Healers, Diplomats, Therapists',
                    relationships: 'You need partners who appreciate your sensitivity and intuitive nature. Emotional security and understanding are crucial.',
                    spiritual: 'Your life path represents the power of intuition and emotional wisdom. You teach others about harmony and cooperation.',
                    colors: ['Blue', 'Silver', 'White'],
                    crystals: ['Moonstone', 'Pearl', 'Aquamarine'],
                    luckyNumbers: [2, 6, 15],
                    tarotCard: 'The High Priestess'
                },
                3: {
                    emoji: '💬',
                    element: 'Air',
                    quality: 'Expression',
                    description: 'The Communicator - Creative expressives with natural charisma and joy',
                    coreEssence: 'You are a natural communicator with creative talents and infectious joy. Your life path is about inspiring others through expression.',
                    lifePurpose: 'To inspire, entertain, and bring joy through creative expression and natural communication skills.',
                    strengths: ['Creativity', 'Communication', 'Optimism', 'Charisma', 'Joy'],
                    challenges: ['Scattered energy', 'Superficiality', 'Restlessness', 'Over-enthusiasm'],
                    career: 'Artists, Writers, Performers, Teachers, Salespeople, Journalists',
                    relationships: 'You need partners who appreciate your creativity and enthusiasm. Fun and intellectual stimulation are important.',
                    spiritual: 'Your life path represents the power of creative expression and joy. You teach others about optimism and communication.',
                    colors: ['Yellow', 'Orange', 'Light Blue'],
                    crystals: ['Citrine', 'Tiger\'s Eye', 'Clear Quartz'],
                    luckyNumbers: [3, 7, 12],
                    tarotCard: 'The Empress'
                },
                4: {
                    emoji: '🏗️',
                    element: 'Earth',
                    quality: 'Foundation',
                    description: 'The Builder - Practical organizers with strong work ethic and reliability',
                    coreEssence: 'You are a natural builder with strong practical skills and reliability. Your life path is about creating solid foundations.',
                    lifePurpose: 'To build solid foundations and create lasting structures through your practical wisdom and organizational skills.',
                    strengths: ['Reliability', 'Organization', 'Patience', 'Practicality', 'Stability'],
                    challenges: ['Rigidity', 'Stubbornness', 'Resistance to change', 'Workaholism'],
                    career: 'Engineers, Architects, Accountants, Managers, Builders, Planners',
                    relationships: 'You need partners who appreciate your reliability and practical nature. Stability and commitment are important.',
                    spiritual: 'Your life path represents the power of building and creating stability. You teach others about patience and organization.',
                    colors: ['Green', 'Brown', 'Navy Blue'],
                    crystals: ['Jade', 'Black Tourmaline', 'Smoky Quartz'],
                    luckyNumbers: [4, 8, 13],
                    tarotCard: 'The Emperor'
                },
                5: {
                    emoji: '🌍',
                    element: 'Air',
                    quality: 'Freedom',
                    description: 'The Adventurer - Freedom-loving explorers with adaptability and curiosity',
                    coreEssence: 'You are a natural adventurer with a love for freedom and new experiences. Your life path is about exploring and inspiring change.',
                    lifePurpose: 'To experience life fully and inspire others to embrace change and adventure through your adaptability.',
                    strengths: ['Adaptability', 'Curiosity', 'Freedom', 'Versatility', 'Adventure'],
                    challenges: ['Restlessness', 'Irresponsibility', 'Overindulgence', 'Commitment issues'],
                    career: 'Travelers, Journalists, Salespeople, Researchers, Explorers, Entrepreneurs',
                    relationships: 'You need partners who give you freedom and share your love for adventure. Variety and excitement are important.',
                    spiritual: 'Your life path represents the power of freedom and exploration. You teach others about adaptability and change.',
                    colors: ['Purple', 'Blue', 'Green'],
                    crystals: ['Amethyst', 'Lapis Lazuli', 'Turquoise'],
                    luckyNumbers: [5, 14, 23],
                    tarotCard: 'The Hierophant'
                },
                6: {
                    emoji: '💝',
                    element: 'Water',
                    quality: 'Nurturing',
                    description: 'The Nurturer - Caring protectors with strong sense of responsibility and love',
                    coreEssence: 'You are a natural nurturer with a strong sense of responsibility and love. Your life path is about caring for others and creating harmony.',
                    lifePurpose: 'To care for others and create beautiful, harmonious environments through your nurturing nature.',
                    strengths: ['Nurturing', 'Responsibility', 'Harmony', 'Compassion', 'Love'],
                    challenges: ['Martyrdom', 'Interference', 'Perfectionism', 'Over-protectiveness'],
                    career: 'Caregivers, Artists, Counselors, Parents, Teachers, Healers',
                    relationships: 'You need partners who appreciate your caring nature and allow you to nurture. Emotional connection is crucial.',
                    spiritual: 'Your life path represents the power of love and nurturing. You teach others about compassion and harmony.',
                    colors: ['Pink', 'Rose', 'Light Green'],
                    crystals: ['Rose Quartz', 'Jade', 'Pink Opal'],
                    luckyNumbers: [6, 15, 24],
                    tarotCard: 'The Lovers'
                },
                7: {
                    emoji: '🔍',
                    element: 'Water',
                    quality: 'Wisdom',
                    description: 'The Seeker - Spiritual intellectuals with deep wisdom and analytical minds',
                    coreEssence: 'You are a natural seeker with deep wisdom and analytical abilities. Your life path is about finding truth and spiritual understanding.',
                    lifePurpose: 'To seek truth, wisdom, and spiritual understanding through your analytical mind and intuitive nature.',
                    strengths: ['Wisdom', 'Analysis', 'Intuition', 'Spirituality', 'Research'],
                    challenges: ['Isolation', 'Overthinking', 'Skepticism', 'Perfectionism'],
                    career: 'Scientists, Researchers, Philosophers, Mystics, Analysts, Spiritual teachers',
                    relationships: 'You need partners who respect your need for solitude and intellectual depth. Mental connection is important.',
                    spiritual: 'Your life path represents the power of wisdom and spiritual seeking. You teach others about truth and understanding.',
                    colors: ['Purple', 'Indigo', 'Deep Blue'],
                    crystals: ['Amethyst', 'Lapis Lazuli', 'Clear Quartz'],
                    luckyNumbers: [7, 16, 25],
                    tarotCard: 'The Chariot'
                },
                8: {
                    emoji: '💎',
                    element: 'Earth',
                    quality: 'Achievement',
                    description: 'The Achiever - Ambitious leaders with strong material and spiritual power',
                    coreEssence: 'You are a natural achiever with strong material and spiritual power. Your life path is about achieving success and using power wisely.',
                    lifePurpose: 'To achieve success and use power for positive change through your ambition and leadership.',
                    strengths: ['Ambition', 'Leadership', 'Material success', 'Authority', 'Power'],
                    challenges: ['Materialism', 'Workaholism', 'Control issues', 'Impatience'],
                    career: 'Executives, Entrepreneurs, Politicians, Managers, Business owners, Leaders',
                    relationships: 'You need partners who respect your ambition and support your goals. Mutual success is important.',
                    spiritual: 'Your life path represents the power of achievement and material success. You teach others about using power wisely.',
                    colors: ['Gold', 'Brown', 'Black'],
                    crystals: ['Tiger\'s Eye', 'Black Tourmaline', 'Pyrite'],
                    luckyNumbers: [8, 17, 26],
                    tarotCard: 'Strength'
                },
                9: {
                    emoji: '🌍',
                    element: 'Fire',
                    quality: 'Humanitarianism',
                    description: 'The Humanitarian - Compassionate visionaries with universal love and wisdom',
                    coreEssence: 'You are a natural humanitarian with universal love and wisdom. Your life path is about serving humanity and bringing compassion.',
                    lifePurpose: 'To serve humanity and bring universal love to the world through your compassion and wisdom.',
                    strengths: ['Compassion', 'Wisdom', 'Universality', 'Idealism', 'Healing'],
                    challenges: ['Detachment', 'Impracticality', 'Emotional distance', 'Martyrdom'],
                    career: 'Humanitarians, Teachers, Healers, Artists, Counselors, Social workers',
                    relationships: 'You need partners who share your humanitarian values and appreciate your compassion. Spiritual connection is important.',
                    spiritual: 'Your life path represents the power of universal love and humanitarian service. You teach others about compassion and wisdom.',
                    colors: ['Purple', 'Gold', 'White'],
                    crystals: ['Amethyst', 'Clear Quartz', 'Rose Quartz'],
                    luckyNumbers: [9, 18, 27],
                    tarotCard: 'The Hermit'
                },
                11: {
                    emoji: '🔮',
                    element: 'Air',
                    quality: 'Intuition',
                    description: 'The Intuitive - Spiritual messengers with heightened intuition and psychic abilities',
                    coreEssence: 'You are a spiritual messenger with heightened intuition and psychic abilities. Your life path is about inspiring others through spiritual wisdom.',
                    lifePurpose: 'To inspire others through spiritual wisdom and intuitive guidance using your heightened psychic abilities.',
                    strengths: ['Intuition', 'Inspiration', 'Spiritual insight', 'Vision', 'Psychic abilities'],
                    challenges: ['Nervous tension', 'Overwhelm', 'Unrealistic expectations', 'Sensitivity'],
                    career: 'Spiritual teachers, Psychics, Counselors, Visionaries, Healers, Intuitives',
                    relationships: 'You need partners who understand your spiritual nature and respect your intuitive gifts. Spiritual connection is crucial.',
                    spiritual: 'Your life path represents the power of spiritual insight and intuitive wisdom. You teach others about spiritual awareness.',
                    colors: ['Purple', 'Silver', 'White'],
                    crystals: ['Amethyst', 'Clear Quartz', 'Moonstone'],
                    luckyNumbers: [11, 22, 33],
                    tarotCard: 'Justice'
                },
                22: {
                    emoji: '🏛️',
                    element: 'Earth',
                    quality: 'Mastery',
                    description: 'The Master Builder - Visionary architects with the power to manifest dreams into reality',
                    coreEssence: 'You are a master builder with the power to manifest dreams into reality. Your life path is about building great structures for humanity.',
                    lifePurpose: 'To build great structures and manifest dreams for humanity through your visionary leadership and practical wisdom.',
                    strengths: ['Vision', 'Manifestation', 'Leadership', 'Practical wisdom', 'Building'],
                    challenges: ['Overwhelm', 'Perfectionism', 'Unrealistic expectations', 'Pressure'],
                    career: 'Architects, Visionary leaders, Builders, Innovators, CEOs, Master craftsmen',
                    relationships: 'You need partners who support your grand vision and understand your need for achievement. Mutual growth is important.',
                    spiritual: 'Your life path represents the power of manifestation and building great structures. You teach others about turning dreams into reality.',
                    colors: ['Gold', 'Purple', 'Deep Blue'],
                    crystals: ['Diamond', 'Clear Quartz', 'Lapis Lazuli'],
                    luckyNumbers: [22, 4, 8],
                    tarotCard: 'The World'
                },
                33: {
                    emoji: '👁️',
                    element: 'Fire',
                    quality: 'Enlightenment',
                    description: 'The Master Teacher - Enlightened guides with the highest level of spiritual service',
                    coreEssence: 'You are a master teacher with the highest level of spiritual service. Your life path is about teaching and healing humanity.',
                    lifePurpose: 'To teach, heal, and guide others on their spiritual journey through your enlightened wisdom and compassionate service.',
                    strengths: ['Spiritual wisdom', 'Healing', 'Teaching', 'Compassion', 'Enlightenment'],
                    challenges: ['Overwhelm', 'Self-sacrifice', 'Spiritual burnout', 'Perfectionism'],
                    career: 'Spiritual teachers, Healers, Counselors, Guides, Masters, Enlightened beings',
                    relationships: 'You need partners who understand your spiritual mission and support your service to humanity. Spiritual partnership is crucial.',
                    spiritual: 'Your life path represents the highest level of spiritual service and enlightenment. You teach others about divine love and wisdom.',
                    colors: ['White', 'Gold', 'Purple'],
                    crystals: ['Diamond', 'Clear Quartz', 'Amethyst'],
                    luckyNumbers: [33, 6, 9],
                    tarotCard: 'The Fool'
                }
            };

            const data = lifePathData[number];

            // Number animation effect
            useEffect(() => {
                const createNumbers = () => {
                    const numbers = [];
                    for (let i = 0; i < 15; i++) {
                        const num = document.createElement('div');
                        num.className = 'absolute w-2 h-2 bg-white/60 rounded-full';
                        num.style.left = (5 + i * 6) + '%';
                        num.style.top = (15 + Math.sin(i) * 8) + '%';
                        num.style.animation = `twinkle ${2 + Math.random() * 2}s infinite`;
                        num.style.animationDelay = Math.random() * 2 + 's';
                        document.getElementById('number-container').appendChild(num);
                        numbers.push(num);
                    }
                    return numbers;
                };

                const numbers = createNumbers();
                return () => numbers.forEach(num => num.remove());
            }, []);

            return (
                <div className="min-h-screen relative overflow-hidden">
                    {/* Animated Background */}
                    <div id="number-container" className="absolute inset-0 pointer-events-none" />
                    
                    {/* Gradient Background */}
                    <div className="absolute inset-0 bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900" />
                    
                    {/* Content */}
                    <div className="relative z-10 p-4">
                        {/* Header */}
                        <motion.div
                            initial={{ y: -50, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            className="flex items-center justify-between mb-6"
                        >
                            <button
                                onClick={onBack}
                                className="p-3 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all"
                            >
                                ←
                            </button>
                            <h1 className="text-2xl font-bold text-white">Life Path Details</h1>
                            <button
                                onClick={() => setIsAudioPlaying(!isAudioPlaying)}
                                className="p-3 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all"
                            >
                                {isAudioPlaying ? '🔊' : '🔇'}
                            </button>
                        </motion.div>

                        {/* Number Header */}
                        <motion.div
                            initial={{ scale: 0.8, opacity: 0 }}
                            animate={{ scale: 1, opacity: 1 }}
                            transition={{ delay: 0.2 }}
                            className="text-center mb-8"
                        >
                            <div className="text-8xl mb-4 animate-pulse">{data.emoji}</div>
                            <h2 className="text-4xl font-bold text-white mb-2">Life Path {number}</h2>
                            <p className="text-lg text-blue-200 mb-4">{data.description}</p>
                            <div className="flex justify-center gap-4 text-sm">
                                <span className="px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full">{data.element}</span>
                                <span className="px-3 py-1 bg-blue-500/20 text-blue-300 rounded-full">{data.quality}</span>
                                <span className="px-3 py-1 bg-green-500/20 text-green-300 rounded-full">Master Number</span>
                            </div>
                        </motion.div>

                        {/* Navigation Tabs */}
                        <motion.div
                            initial={{ y: 20, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            transition={{ delay: 0.4 }}
                            className="flex gap-2 mb-6 overflow-x-auto"
                        >
                            {['overview', 'purpose', 'career', 'relationships', 'spiritual'].map((section) => (
                                <button
                                    key={section}
                                    onClick={() => setCurrentSection(section)}
                                    className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
                                        currentSection === section
                                            ? 'bg-white/20 text-white'
                                            : 'bg-white/10 text-gray-300 hover:bg-white/15'
                                    }`}
                                >
                                    {section.charAt(0).toUpperCase() + section.slice(1)}
                                </button>
                            ))}
                        </motion.div>

                        {/* Content Sections */}
                        <motion.div
                            key={currentSection}
                            initial={{ x: 20, opacity: 0 }}
                            animate={{ x: 0, opacity: 1 }}
                            className="space-y-6"
                        >
                            {currentSection === 'overview' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Core Essence</h3>
                                        <p className="text-gray-200 leading-relaxed">{data.coreEssence}</p>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-4">
                                            <h4 className="text-lg font-semibold text-green-300 mb-3">Strengths</h4>
                                            <div className="space-y-2">
                                                {data.strengths.map((strength, index) => (
                                                    <div key={index} className="flex items-center gap-2">
                                                        <span className="text-green-400">•</span>
                                                        <span className="text-gray-200 text-sm">{strength}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                        
                                        <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-4">
                                            <h4 className="text-lg font-semibold text-red-300 mb-3">Challenges</h4>
                                            <div className="space-y-2">
                                                {data.challenges.map((challenge, index) => (
                                                    <div key={index} className="flex items-center gap-2">
                                                        <span className="text-red-400">•</span>
                                                        <span className="text-gray-200 text-sm">{challenge}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'purpose' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Life Purpose</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.lifePurpose}</p>
                                        <div className="bg-white/5 rounded-lg p-4">
                                            <h4 className="text-lg font-semibold text-purple-300 mb-2">Spiritual Mission</h4>
                                            <p className="text-gray-200">Your life path number reveals your unique spiritual mission and the lessons you are here to learn and teach.</p>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'career' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Career Paths</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.career}</p>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-yellow-300 mb-2">Lucky Numbers</h4>
                                                <div className="flex gap-2">
                                                    {data.luckyNumbers.map((num, index) => (
                                                        <span key={index} className="w-8 h-8 bg-yellow-500/20 text-yellow-300 rounded-full flex items-center justify-center text-sm font-bold">
                                                            {num}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-purple-300 mb-2">Tarot Card</h4>
                                                <span className="text-purple-300 font-medium">{data.tarotCard}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'relationships' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Relationship Dynamics</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.relationships}</p>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-pink-300 mb-2">Colors</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.colors.map((color, index) => (
                                                        <span key={index} className="px-2 py-1 bg-pink-500/20 text-pink-300 rounded text-xs">
                                                            {color}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="bg-white/5 rounded-lg p-4">
                                                <h4 className="text-lg font-semibold text-blue-300 mb-2">Crystals</h4>
                                                <div className="flex flex-wrap gap-2">
                                                    {data.crystals.map((crystal, index) => (
                                                        <span key={index} className="px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs">
                                                            {crystal}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentSection === 'spiritual' && (
                                <div className="space-y-6">
                                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                        <h3 className="text-xl font-semibold text-white mb-4">Spiritual Essence</h3>
                                        <p className="text-gray-200 leading-relaxed mb-4">{data.spiritual}</p>
                                        <div className="bg-white/5 rounded-lg p-4">
                                            <h4 className="text-lg font-semibold text-indigo-300 mb-2">Spiritual Path</h4>
                                            <p className="text-gray-200">Your life path number guides your spiritual journey and reveals the unique wisdom you are here to share with the world.</p>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </motion.div>
                    </div>
                </div>
            );
        };

        // Disclaimer Modal
        const DisclaimerModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
                    <motion.div
                        initial={{ scale: 0.9, opacity: 0 }}
                        animate={{ scale: 1, opacity: 1 }}
                        className="cosmic-card max-w-md w-full relative"
                    >
                        <div className="text-center mb-6">
                            <div className="w-16 h-16 mx-auto rounded-full bg-yellow-500/20 flex items-center justify-center mb-4">
                                ⚠️
                            </div>
                            <h2 className="text-xl font-semibold mb-2">
                                Welcome to Astro Quest
                            </h2>
                            <p className="text-sm text-gray-400 leading-relaxed">
                                This app is designed for personal reflection and spiritual exploration. 
                                All insights, interpretations, and guidance are meant to inspire self-discovery 
                                and should not be taken as absolute truth or professional advice.
                            </p>
                        </div>

                        <div className="space-y-3 text-sm text-gray-400">
                            <div className="flex items-start gap-3">
                                <div className="w-2 h-2 rounded-full bg-purple-500 mt-2 flex-shrink-0"></div>
                                <p>Use this app as a tool for personal growth and self-reflection</p>
                            </div>
                            <div className="flex items-start gap-3">
                                <div className="w-2 h-2 rounded-full bg-purple-500 mt-2 flex-shrink-0"></div>
                                <p>Trust your intuition and inner wisdom above all else</p>
                            </div>
                            <div className="flex items-start gap-3">
                                <div className="w-2 h-2 rounded-full bg-purple-500 mt-2 flex-shrink-0"></div>
                                <p>Seek professional guidance for important life decisions</p>
                            </div>
                        </div>

                        <button
                            onClick={onClose}
                            className="glow-button w-full mt-6"
                        >
                            I Understand - Begin My Journey
                        </button>
                    </motion.div>
                </div>
            );
        };

        // Main App Component
        const AstroQuestApp = () => {
            const [currentScreen, setCurrentScreen] = useState('auth');
            const [screenParams, setScreenParams] = useState({});
            const [userProfile, setUserProfile] = useState(null);
            const [showDisclaimer, setShowDisclaimer] = useState(false);
            const { experienceData, addExperience } = useExperience();
            const [rituals, setRituals] = useState(() => {
                try {
                    const userId = localStorage.getItem('astro_quest_user_id');
                    return JSON.parse(localStorage.getItem(`astro_quest_rituals_${userId}`) || '[]');
                } catch { return []; }
            });
            useEffect(() => {
                const userId = localStorage.getItem('astro_quest_user_id');
                if (userId) {
                    localStorage.setItem(`astro_quest_rituals_${userId}`, JSON.stringify(rituals));
                }
            }, [rituals]);

            useEffect(() => {
                const hasSeenDisclaimer = localStorage.getItem('astro_quest_disclaimer_seen');
                if (!hasSeenDisclaimer) {
                    setShowDisclaimer(true);
                }
            }, []);

            const handleDisclaimerClose = () => {
                setShowDisclaimer(false);
                localStorage.setItem('astro_quest_disclaimer_seen', 'true');
            };

            const handleLogin = (formData) => {
                // Generate unique user ID for this session
                const userId = Date.now().toString() + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('astro_quest_user_id', userId);
                setCurrentScreen('welcome');
            };

            const handleSignup = (formData) => {
                // Generate unique user ID for this session
                const userId = Date.now().toString() + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('astro_quest_user_id', userId);
                setCurrentScreen('welcome');
            };

            const handleProfileComplete = (profile) => {
                setUserProfile(profile);
                setCurrentScreen('dashboard');
                addExperience(50); // Welcome bonus
            };

            const handleAddToRituals = (crystal) => {
                setRituals(prev => prev.some(r => r.name === crystal.name) ? prev : [...prev, crystal]);
                addExperience(10);
                alert(`${crystal.name} added to your rituals!`);
            };

            const handleNavigate = (screen, params = {}) => {
                setCurrentScreen(screen);
                setScreenParams(params);
            };

            const renderScreen = () => {
                switch (currentScreen) {
                    case 'auth':
                        return <AuthScreen onLogin={handleLogin} onSignup={handleSignup} />;
                    case 'welcome':
                        return <WelcomeScreen onComplete={handleProfileComplete} />;
                    case 'dashboard':
                        return <DashboardScreen profile={userProfile} onNavigate={handleNavigate} experienceData={experienceData} />;
                    case 'crystal-companion':
                        return <CrystalCompanionScreen profile={userProfile} onBack={() => handleNavigate('dashboard')} onAddToRituals={handleAddToRituals} />;
                    case 'stone-library':
                        return <StoneLibraryScreen onBack={() => handleNavigate('dashboard')} onAddToRituals={handleAddToRituals} />;
                    case 'color-study':
                        return <ColorStudyScreen profile={userProfile} onBack={() => handleNavigate('dashboard')} />;
                    case 'color-fusion':
                        return <ColorCrystalFusionScreen profile={userProfile} onBack={() => handleNavigate('dashboard')} addExperience={addExperience} />;
                    case 'trait-fusion':
                        return <TraitFusionScreen profile={userProfile} onBack={() => handleNavigate('dashboard')} addExperience={addExperience} />;
                    case 'missions':
                        return <MissionScreen profile={userProfile} onBack={() => handleNavigate('dashboard')} addExperience={addExperience} />;
                    case 'crystal-shop':
                        return <CrystalShopScreen profile={userProfile} onBack={() => handleNavigate('dashboard')} addExperience={addExperience} />;
                    case 'vaastu':
                        return <VaastuScreen profile={userProfile} onBack={() => handleNavigate('dashboard')} addExperience={addExperience} />;
                    case 'star-sign-detail':
                        return <StarSignDetailScreen sign={screenParams.sign} onBack={() => handleNavigate('dashboard')} />;
                    case 'moon-sign-detail':
                        return <MoonSignDetailScreen sign={screenParams.sign} onBack={() => handleNavigate('dashboard')} />;
                    case 'life-path-detail':
                        return <LifePathDetailScreen number={screenParams.number} onBack={() => handleNavigate('dashboard')} />;
                    case 'numerology':
                        return <NumerologyScreen profile={userProfile} onNavigate={handleNavigate} experienceData={experienceData} addExperience={addExperience} />;
                    case 'reflection':
                        return <ReflectionScreen onNavigate={handleNavigate} experienceData={experienceData} addExperience={addExperience} />;
                    default:
                        return <AuthScreen onLogin={handleLogin} onSignup={handleSignup} />;
                }
            };

            return (
                <div className="min-h-screen relative overflow-hidden">
                    <StarfieldBackground />
                    
                    <AnimatePresence mode="wait">
                        <motion.div
                            key={currentScreen}
                            initial={{ opacity: 0, y: 50 }}
                            animate={{ opacity: 1, y: 0 }}
                            exit={{ opacity: 0, y: -50 }}
                            transition={{ duration: 0.5, ease: "easeInOut" }}
                            className="relative z-10"
                        >
                            {renderScreen()}
                        </motion.div>
                    </AnimatePresence>

                    <DisclaimerModal 
                        isOpen={showDisclaimer} 
                        onClose={handleDisclaimerClose} 
                    />
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<AstroQuestApp />, document.getElementById('root'));
    </script>
</body>
</html> 